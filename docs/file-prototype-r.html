<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Prototypical R File | Collaborative Data Science Practices</title>
  <meta name="description" content="Collection of publicly available practices of data science and analysis." />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Prototypical R File | Collaborative Data Science Practices" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Collection of publicly available practices of data science and analysis." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Prototypical R File | Collaborative Data Science Practices" />
  
  <meta name="twitter:description" content="Collection of publicly available practices of data science and analysis." />
  

<meta name="author" content="Will Beasley" />


<meta name="date" content="2021-07-28" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="architecture.html"/>
<link rel="next" href="file-prototype-sql.html"/>
<script src="libs/header-attrs-2.9/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Collaborative Data Science</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="coding.html"><a href="coding.html"><i class="fa fa-check"></i><b>2</b> Coding Principles</a>
<ul>
<li class="chapter" data-level="2.1" data-path="coding.html"><a href="coding.html#coding-simplify"><i class="fa fa-check"></i><b>2.1</b> Simplify</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="coding.html"><a href="coding.html#coding-simplify-types"><i class="fa fa-check"></i><b>2.1.1</b> Data Types</a></li>
<li class="chapter" data-level="2.1.2" data-path="coding.html"><a href="coding.html#coding-simplify-categorical"><i class="fa fa-check"></i><b>2.1.2</b> Categorical Levels</a></li>
<li class="chapter" data-level="2.1.3" data-path="coding.html"><a href="coding.html#coding-simplify-recoding"><i class="fa fa-check"></i><b>2.1.3</b> Recoding</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="coding.html"><a href="coding.html#coding-defensive"><i class="fa fa-check"></i><b>2.2</b> Defensive Style</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="coding.html"><a href="coding.html#coding-defensive-qualify-functions"><i class="fa fa-check"></i><b>2.2.1</b> Qualify functions</a></li>
<li class="chapter" data-level="2.2.2" data-path="coding.html"><a href="coding.html#coding-defensive-date-arithmetic"><i class="fa fa-check"></i><b>2.2.2</b> Date Arithmetic</a></li>
<li class="chapter" data-level="2.2.3" data-path="coding.html"><a href="coding.html#excluding-bad-cases"><i class="fa fa-check"></i><b>2.2.3</b> Excluding Bad Cases</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="architecture.html"><a href="architecture.html"><i class="fa fa-check"></i><b>3</b> Architecture Principles</a>
<ul>
<li class="chapter" data-level="3.1" data-path="architecture.html"><a href="architecture.html#encapsulation"><i class="fa fa-check"></i><b>3.1</b> Encapsulation</a></li>
<li class="chapter" data-level="3.2" data-path="architecture.html"><a href="architecture.html#leverage-team-members-strengths-avoid-weaknesses"><i class="fa fa-check"></i><b>3.2</b> Leverage team member’s strengths &amp; avoid weaknesses</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="architecture.html"><a href="architecture.html#focused-code-files"><i class="fa fa-check"></i><b>3.2.1</b> Focused code files</a></li>
<li class="chapter" data-level="3.2.2" data-path="architecture.html"><a href="architecture.html#metadata-for-content-experts"><i class="fa fa-check"></i><b>3.2.2</b> Metadata for content experts</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="architecture.html"><a href="architecture.html#scales"><i class="fa fa-check"></i><b>3.3</b> Scales</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="architecture.html"><a href="architecture.html#single-source-single-analysis"><i class="fa fa-check"></i><b>3.3.1</b> Single source &amp; single analysis</a></li>
<li class="chapter" data-level="3.3.2" data-path="architecture.html"><a href="architecture.html#multiple-sources-multiple-analyses"><i class="fa fa-check"></i><b>3.3.2</b> Multiple sources &amp; multiple analyses</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="architecture.html"><a href="architecture.html#architecture-consistency"><i class="fa fa-check"></i><b>3.4</b> Consistency</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="architecture.html"><a href="architecture.html#consistency-files"><i class="fa fa-check"></i><b>3.4.1</b> Across Files</a></li>
<li class="chapter" data-level="3.4.2" data-path="architecture.html"><a href="architecture.html#across-languages"><i class="fa fa-check"></i><b>3.4.2</b> Across Languages</a></li>
<li class="chapter" data-level="3.4.3" data-path="architecture.html"><a href="architecture.html#across-projects"><i class="fa fa-check"></i><b>3.4.3</b> Across Projects</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="file-prototype-r.html"><a href="file-prototype-r.html"><i class="fa fa-check"></i><b>4</b> Prototypical R File</a>
<ul>
<li class="chapter" data-level="4.1" data-path="file-prototype-r.html"><a href="file-prototype-r.html#chunk-clear"><i class="fa fa-check"></i><b>4.1</b> Clear Memory</a></li>
<li class="chapter" data-level="4.2" data-path="file-prototype-r.html"><a href="file-prototype-r.html#chunk-load-sources"><i class="fa fa-check"></i><b>4.2</b> Load Sources</a></li>
<li class="chapter" data-level="4.3" data-path="file-prototype-r.html"><a href="file-prototype-r.html#chunk-load-packages"><i class="fa fa-check"></i><b>4.3</b> Load Packages</a></li>
<li class="chapter" data-level="4.4" data-path="file-prototype-r.html"><a href="file-prototype-r.html#chunk-declare"><i class="fa fa-check"></i><b>4.4</b> Declare Globals</a></li>
<li class="chapter" data-level="4.5" data-path="file-prototype-r.html"><a href="file-prototype-r.html#chunk-load-data"><i class="fa fa-check"></i><b>4.5</b> Load Data</a></li>
<li class="chapter" data-level="4.6" data-path="file-prototype-r.html"><a href="file-prototype-r.html#chunk-tweak-data"><i class="fa fa-check"></i><b>4.6</b> Tweak Data</a></li>
<li class="chapter" data-level="4.7" data-path="file-prototype-r.html"><a href="file-prototype-r.html#chunk-unique"><i class="fa fa-check"></i><b>4.7</b> (Unique Content)</a></li>
<li class="chapter" data-level="4.8" data-path="file-prototype-r.html"><a href="file-prototype-r.html#chunk-verify-values"><i class="fa fa-check"></i><b>4.8</b> Verify Values</a></li>
<li class="chapter" data-level="4.9" data-path="file-prototype-r.html"><a href="file-prototype-r.html#chunk-specify-columns"><i class="fa fa-check"></i><b>4.9</b> Specify Output Columns</a></li>
<li class="chapter" data-level="4.10" data-path="file-prototype-r.html"><a href="file-prototype-r.html#save-to-disk-or-database"><i class="fa fa-check"></i><b>4.10</b> Save to Disk or Database</a></li>
<li class="chapter" data-level="4.11" data-path="file-prototype-r.html"><a href="file-prototype-r.html#additional-resources"><i class="fa fa-check"></i><b>4.11</b> Additional Resources</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="file-prototype-sql.html"><a href="file-prototype-sql.html"><i class="fa fa-check"></i><b>5</b> Prototypical SQL File</a>
<ul>
<li class="chapter" data-level="5.1" data-path="file-prototype-sql.html"><a href="file-prototype-sql.html#sql-choice"><i class="fa fa-check"></i><b>5.1</b> Choice of Database Engine</a></li>
<li class="chapter" data-level="5.2" data-path="file-prototype-sql.html"><a href="file-prototype-sql.html#sql-ferry"><i class="fa fa-check"></i><b>5.2</b> Ferry</a></li>
<li class="chapter" data-level="5.3" data-path="file-prototype-sql.html"><a href="file-prototype-sql.html#sql-default-database"><i class="fa fa-check"></i><b>5.3</b> Default Databases</a></li>
<li class="chapter" data-level="5.4" data-path="file-prototype-sql.html"><a href="file-prototype-sql.html#sql-declare"><i class="fa fa-check"></i><b>5.4</b> Declare Values Databases</a></li>
<li class="chapter" data-level="5.5" data-path="file-prototype-sql.html"><a href="file-prototype-sql.html#sql-recreate"><i class="fa fa-check"></i><b>5.5</b> Recreate Table</a></li>
<li class="chapter" data-level="5.6" data-path="file-prototype-sql.html"><a href="file-prototype-sql.html#sql-truncate"><i class="fa fa-check"></i><b>5.6</b> Truncate Table</a></li>
<li class="chapter" data-level="5.7" data-path="file-prototype-sql.html"><a href="file-prototype-sql.html#sql-insert"><i class="fa fa-check"></i><b>5.7</b> INSERT INTO</a></li>
<li class="chapter" data-level="5.8" data-path="file-prototype-sql.html"><a href="file-prototype-sql.html#sql-select"><i class="fa fa-check"></i><b>5.8</b> SELECT</a></li>
<li class="chapter" data-level="5.9" data-path="file-prototype-sql.html"><a href="file-prototype-sql.html#sql-from"><i class="fa fa-check"></i><b>5.9</b> FROM</a></li>
<li class="chapter" data-level="5.10" data-path="file-prototype-sql.html"><a href="file-prototype-sql.html#sql-where"><i class="fa fa-check"></i><b>5.10</b> WHERE</a></li>
<li class="chapter" data-level="5.11" data-path="file-prototype-sql.html"><a href="file-prototype-sql.html#sql-order-by"><i class="fa fa-check"></i><b>5.11</b> ORDER BY</a></li>
<li class="chapter" data-level="5.12" data-path="file-prototype-sql.html"><a href="file-prototype-sql.html#sql-indexing"><i class="fa fa-check"></i><b>5.12</b> Indexing</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="repo-prototype.html"><a href="repo-prototype.html"><i class="fa fa-check"></i><b>6</b> Prototypical Repository</a>
<ul>
<li class="chapter" data-level="6.1" data-path="repo-prototype.html"><a href="repo-prototype.html#repo-root"><i class="fa fa-check"></i><b>6.1</b> Root</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="repo-prototype.html"><a href="repo-prototype.html#repo-config"><i class="fa fa-check"></i><b>6.1.1</b> <code>config.R</code></a></li>
<li class="chapter" data-level="6.1.2" data-path="repo-prototype.html"><a href="repo-prototype.html#repo-flow"><i class="fa fa-check"></i><b>6.1.2</b> <code>flow.R</code></a></li>
<li class="chapter" data-level="6.1.3" data-path="repo-prototype.html"><a href="repo-prototype.html#repo-readme"><i class="fa fa-check"></i><b>6.1.3</b> <code>README.md</code></a></li>
<li class="chapter" data-level="6.1.4" data-path="repo-prototype.html"><a href="repo-prototype.html#repo-rproj"><i class="fa fa-check"></i><b>6.1.4</b> <code>*.Rproj</code></a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="repo-prototype.html"><a href="repo-prototype.html#repo-analysis"><i class="fa fa-check"></i><b>6.2</b> Analysis</a></li>
<li class="chapter" data-level="6.3" data-path="repo-prototype.html"><a href="repo-prototype.html#repo-data-public"><i class="fa fa-check"></i><b>6.3</b> Data Public</a></li>
<li class="chapter" data-level="6.4" data-path="repo-prototype.html"><a href="repo-prototype.html#repo-data-unshared"><i class="fa fa-check"></i><b>6.4</b> Data Unshared</a></li>
<li class="chapter" data-level="6.5" data-path="repo-prototype.html"><a href="repo-prototype.html#repo-documentation"><i class="fa fa-check"></i><b>6.5</b> Documentation</a></li>
<li class="chapter" data-level="6.6" data-path="repo-prototype.html"><a href="repo-prototype.html#repo-manipulation"><i class="fa fa-check"></i><b>6.6</b> Manipulation</a></li>
<li class="chapter" data-level="6.7" data-path="repo-prototype.html"><a href="repo-prototype.html#repo-stitched"><i class="fa fa-check"></i><b>6.7</b> Stitched Output</a></li>
<li class="chapter" data-level="6.8" data-path="repo-prototype.html"><a href="repo-prototype.html#repo-utility"><i class="fa fa-check"></i><b>6.8</b> Utility</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="rest.html"><a href="rest.html"><i class="fa fa-check"></i><b>7</b> Data at Rest</a>
<ul>
<li class="chapter" data-level="7.1" data-path="rest.html"><a href="rest.html#data-states"><i class="fa fa-check"></i><b>7.1</b> Data States</a></li>
<li class="chapter" data-level="7.2" data-path="rest.html"><a href="rest.html#data-containers"><i class="fa fa-check"></i><b>7.2</b> Data Containers</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="rest.html"><a href="rest.html#data-containers-csv"><i class="fa fa-check"></i><b>7.2.1</b> csv</a></li>
<li class="chapter" data-level="7.2.2" data-path="rest.html"><a href="rest.html#data-containers-rds"><i class="fa fa-check"></i><b>7.2.2</b> rds</a></li>
<li class="chapter" data-level="7.2.3" data-path="rest.html"><a href="rest.html#data-containers-yaml"><i class="fa fa-check"></i><b>7.2.3</b> yaml, json, and xml</a></li>
<li class="chapter" data-level="7.2.4" data-path="rest.html"><a href="rest.html#data-containers-arrow"><i class="fa fa-check"></i><b>7.2.4</b> Arrow</a></li>
<li class="chapter" data-level="7.2.5" data-path="rest.html"><a href="rest.html#data-containers-sqlite"><i class="fa fa-check"></i><b>7.2.5</b> SQLite</a></li>
<li class="chapter" data-level="7.2.6" data-path="rest.html"><a href="rest.html#data-containers-database"><i class="fa fa-check"></i><b>7.2.6</b> Central Enterprise database</a></li>
<li class="chapter" data-level="7.2.7" data-path="rest.html"><a href="rest.html#data-containers-redcap"><i class="fa fa-check"></i><b>7.2.7</b> Central REDCap database</a></li>
<li class="chapter" data-level="7.2.8" data-path="rest.html"><a href="rest.html#data-containers-avoid"><i class="fa fa-check"></i><b>7.2.8</b> Containers to avoid</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="rest.html"><a href="rest.html#data-conventions"><i class="fa fa-check"></i><b>7.3</b> Storage Conventions</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="rest.html"><a href="rest.html#data-conventions-all"><i class="fa fa-check"></i><b>7.3.1</b> All Sources</a></li>
<li class="chapter" data-level="7.3.2" data-path="rest.html"><a href="rest.html#data-conventions-text"><i class="fa fa-check"></i><b>7.3.2</b> Text</a></li>
<li class="chapter" data-level="7.3.3" data-path="rest.html"><a href="rest.html#data-conventions-excel"><i class="fa fa-check"></i><b>7.3.3</b> Excel</a></li>
<li class="chapter" data-level="7.3.4" data-path="rest.html"><a href="rest.html#data-conventions-meditech"><i class="fa fa-check"></i><b>7.3.4</b> Meditech</a></li>
<li class="chapter" data-level="7.3.5" data-path="rest.html"><a href="rest.html#data-conventions-database"><i class="fa fa-check"></i><b>7.3.5</b> Databases</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="patterns.html"><a href="patterns.html"><i class="fa fa-check"></i><b>8</b> Patterns</a>
<ul>
<li class="chapter" data-level="8.1" data-path="patterns.html"><a href="patterns.html#pattern-ellis"><i class="fa fa-check"></i><b>8.1</b> Ellis</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="patterns.html"><a href="patterns.html#purpose"><i class="fa fa-check"></i><b>8.1.1</b> Purpose</a></li>
<li class="chapter" data-level="8.1.2" data-path="patterns.html"><a href="patterns.html#philosophy"><i class="fa fa-check"></i><b>8.1.2</b> Philosophy</a></li>
<li class="chapter" data-level="8.1.3" data-path="patterns.html"><a href="patterns.html#guidelines"><i class="fa fa-check"></i><b>8.1.3</b> Guidelines</a></li>
<li class="chapter" data-level="8.1.4" data-path="patterns.html"><a href="patterns.html#examples"><i class="fa fa-check"></i><b>8.1.4</b> Examples</a></li>
<li class="chapter" data-level="8.1.5" data-path="patterns.html"><a href="patterns.html#elements"><i class="fa fa-check"></i><b>8.1.5</b> Elements</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="patterns.html"><a href="patterns.html#pattern-arch"><i class="fa fa-check"></i><b>8.2</b> Arch</a></li>
<li class="chapter" data-level="8.3" data-path="patterns.html"><a href="patterns.html#pattern-ferry"><i class="fa fa-check"></i><b>8.3</b> Ferry</a></li>
<li class="chapter" data-level="8.4" data-path="patterns.html"><a href="patterns.html#pattern-scribe"><i class="fa fa-check"></i><b>8.4</b> Scribe</a></li>
<li class="chapter" data-level="8.5" data-path="patterns.html"><a href="patterns.html#pattern-analysis"><i class="fa fa-check"></i><b>8.5</b> Analysis</a></li>
<li class="chapter" data-level="8.6" data-path="patterns.html"><a href="patterns.html#pattern-presentation-static"><i class="fa fa-check"></i><b>8.6</b> Presentation -Static</a></li>
<li class="chapter" data-level="8.7" data-path="patterns.html"><a href="patterns.html#pattern-presentation-interactive"><i class="fa fa-check"></i><b>8.7</b> Presentation -Interactive</a></li>
<li class="chapter" data-level="8.8" data-path="patterns.html"><a href="patterns.html#pattern-metadata"><i class="fa fa-check"></i><b>8.8</b> Metadata</a>
<ul>
<li class="chapter" data-level="8.8.1" data-path="patterns.html"><a href="patterns.html#primary-rules-for-mapping"><i class="fa fa-check"></i><b>8.8.1</b> Primary Rules for Mapping</a></li>
<li class="chapter" data-level="8.8.2" data-path="patterns.html"><a href="patterns.html#secondary-rules-for-mapping"><i class="fa fa-check"></i><b>8.8.2</b> Secondary Rules for Mapping</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="security.html"><a href="security.html"><i class="fa fa-check"></i><b>9</b> Security &amp; Private Data</a>
<ul>
<li class="chapter" data-level="9.1" data-path="security.html"><a href="security.html#security-guidelines"><i class="fa fa-check"></i><b>9.1</b> Security Guidelines</a></li>
<li class="chapter" data-level="9.2" data-path="security.html"><a href="security.html#dataset-level-redaction"><i class="fa fa-check"></i><b>9.2</b> Dataset-level Redaction</a></li>
<li class="chapter" data-level="9.3" data-path="security.html"><a href="security.html#security-for-data-at-rest"><i class="fa fa-check"></i><b>9.3</b> Security for Data at Rest</a></li>
<li class="chapter" data-level="9.4" data-path="security.html"><a href="security.html#file-level-permissions"><i class="fa fa-check"></i><b>9.4</b> File-level permissions</a></li>
<li class="chapter" data-level="9.5" data-path="security.html"><a href="security.html#database-permissions"><i class="fa fa-check"></i><b>9.5</b> Database permissions</a></li>
<li class="chapter" data-level="9.6" data-path="security.html"><a href="security.html#public-private-repositories"><i class="fa fa-check"></i><b>9.6</b> Public &amp; Private Repositories</a>
<ul>
<li class="chapter" data-level="9.6.1" data-path="security.html"><a href="security.html#repo-rules"><i class="fa fa-check"></i><b>9.6.1</b> Repo Rules</a></li>
<li class="chapter" data-level="9.6.2" data-path="security.html"><a href="security.html#scrubbing-github-history"><i class="fa fa-check"></i><b>9.6.2</b> Scrubbing GitHub history</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="automation.html"><a href="automation.html"><i class="fa fa-check"></i><b>10</b> Automation &amp; Reproducibility</a>
<ul>
<li class="chapter" data-level="10.1" data-path="automation.html"><a href="automation.html#automation-mediator"><i class="fa fa-check"></i><b>10.1</b> Mediator</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="automation.html"><a href="automation.html#automation-flow"><i class="fa fa-check"></i><b>10.1.1</b> Flow File in R</a></li>
<li class="chapter" data-level="10.1.2" data-path="automation.html"><a href="automation.html#automation-makefile"><i class="fa fa-check"></i><b>10.1.2</b> Makefile</a></li>
<li class="chapter" data-level="10.1.3" data-path="automation.html"><a href="automation.html#automation-ssis"><i class="fa fa-check"></i><b>10.1.3</b> SSIS</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="automation.html"><a href="automation.html#automation-scheduling"><i class="fa fa-check"></i><b>10.2</b> Scheduling</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="automation.html"><a href="automation.html#automation-cron"><i class="fa fa-check"></i><b>10.2.1</b> cron</a></li>
<li class="chapter" data-level="10.2.2" data-path="automation.html"><a href="automation.html#automation-task-scheduler"><i class="fa fa-check"></i><b>10.2.2</b> Task Scheduler</a></li>
<li class="chapter" data-level="10.2.3" data-path="automation.html"><a href="automation.html#automation-sql-server-agent"><i class="fa fa-check"></i><b>10.2.3</b> SQL Server Agent</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="automation.html"><a href="automation.html#auxiliary-issues"><i class="fa fa-check"></i><b>10.3</b> Auxiliary Issues</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="automation.html"><a href="automation.html#sink-log-files"><i class="fa fa-check"></i><b>10.3.1</b> Sink Log Files</a></li>
<li class="chapter" data-level="10.3.2" data-path="automation.html"><a href="automation.html#package-versions"><i class="fa fa-check"></i><b>10.3.2</b> Package Versions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="scaling-up.html"><a href="scaling-up.html"><i class="fa fa-check"></i><b>11</b> Scaling Up</a>
<ul>
<li class="chapter" data-level="11.1" data-path="scaling-up.html"><a href="scaling-up.html#data-storage"><i class="fa fa-check"></i><b>11.1</b> Data Storage</a></li>
<li class="chapter" data-level="11.2" data-path="scaling-up.html"><a href="scaling-up.html#data-processing"><i class="fa fa-check"></i><b>11.2</b> Data Processing</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="collaboration.html"><a href="collaboration.html"><i class="fa fa-check"></i><b>12</b> Parallel Collaboration</a>
<ul>
<li class="chapter" data-level="12.1" data-path="collaboration.html"><a href="collaboration.html#social-contract"><i class="fa fa-check"></i><b>12.1</b> Social Contract</a></li>
<li class="chapter" data-level="12.2" data-path="collaboration.html"><a href="collaboration.html#code-reviews"><i class="fa fa-check"></i><b>12.2</b> Code Reviews</a></li>
<li class="chapter" data-level="12.3" data-path="collaboration.html"><a href="collaboration.html#remote"><i class="fa fa-check"></i><b>12.3</b> Remote</a></li>
<li class="chapter" data-level="12.4" data-path="collaboration.html"><a href="collaboration.html#additional-resources-1"><i class="fa fa-check"></i><b>12.4</b> Additional Resources</a></li>
<li class="chapter" data-level="12.5" data-path="collaboration.html"><a href="collaboration.html#loose-notes"><i class="fa fa-check"></i><b>12.5</b> Loose Notes</a>
<ul>
<li class="chapter" data-level="12.5.1" data-path="collaboration.html"><a href="collaboration.html#github"><i class="fa fa-check"></i><b>12.5.1</b> GitHub</a></li>
<li class="chapter" data-level="12.5.2" data-path="collaboration.html"><a href="collaboration.html#common-code"><i class="fa fa-check"></i><b>12.5.2</b> Common Code</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="document.html"><a href="document.html"><i class="fa fa-check"></i><b>13</b> Documentation</a>
<ul>
<li class="chapter" data-level="13.1" data-path="document.html"><a href="document.html#team-wide"><i class="fa fa-check"></i><b>13.1</b> Team-wide</a></li>
<li class="chapter" data-level="13.2" data-path="document.html"><a href="document.html#project-specific"><i class="fa fa-check"></i><b>13.2</b> Project-specific</a></li>
<li class="chapter" data-level="13.3" data-path="document.html"><a href="document.html#dataset-origin-structure"><i class="fa fa-check"></i><b>13.3</b> Dataset Origin &amp; Structure</a></li>
<li class="chapter" data-level="13.4" data-path="document.html"><a href="document.html#issues-tasks"><i class="fa fa-check"></i><b>13.4</b> Issues &amp; Tasks</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="document.html"><a href="document.html#documentation-issue-template"><i class="fa fa-check"></i><b>13.4.1</b> GitHub Issue Template</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="document.html"><a href="document.html#flow-diagrams"><i class="fa fa-check"></i><b>13.5</b> Flow Diagrams</a></li>
<li class="chapter" data-level="13.6" data-path="document.html"><a href="document.html#setting-up-new-machine"><i class="fa fa-check"></i><b>13.6</b> Setting up new machine</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="style.html"><a href="style.html"><i class="fa fa-check"></i><b>14</b> Style Guide</a>
<ul>
<li class="chapter" data-level="14.1" data-path="style.html"><a href="style.html#readability"><i class="fa fa-check"></i><b>14.1</b> Readability</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="style.html"><a href="style.html#style-number"><i class="fa fa-check"></i><b>14.1.1</b> Number</a></li>
<li class="chapter" data-level="14.1.2" data-path="style.html"><a href="style.html#style-abbreviation"><i class="fa fa-check"></i><b>14.1.2</b> Abbreviations</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="style.html"><a href="style.html#datasets"><i class="fa fa-check"></i><b>14.2</b> Datasets</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="style.html"><a href="style.html#style-filter"><i class="fa fa-check"></i><b>14.2.1</b> Filtering Rows</a></li>
<li class="chapter" data-level="14.2.2" data-path="style.html"><a href="style.html#style-attach"><i class="fa fa-check"></i><b>14.2.2</b> Don’t attach</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="style.html"><a href="style.html#style-factor"><i class="fa fa-check"></i><b>14.3</b> Categorical Variables</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="style.html"><a href="style.html#style-factor-unknown"><i class="fa fa-check"></i><b>14.3.1</b> Explicit Missing Values</a></li>
<li class="chapter" data-level="14.3.2" data-path="style.html"><a href="style.html#style-factor-granularity"><i class="fa fa-check"></i><b>14.3.2</b> Granularity</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="style.html"><a href="style.html#style-dates"><i class="fa fa-check"></i><b>14.4</b> Dates</a></li>
<li class="chapter" data-level="14.5" data-path="style.html"><a href="style.html#naming"><i class="fa fa-check"></i><b>14.5</b> Naming</a>
<ul>
<li class="chapter" data-level="14.5.1" data-path="style.html"><a href="style.html#style-naming-variables"><i class="fa fa-check"></i><b>14.5.1</b> Variables</a></li>
<li class="chapter" data-level="14.5.2" data-path="style.html"><a href="style.html#style-naming-files"><i class="fa fa-check"></i><b>14.5.2</b> Files and Folders</a></li>
<li class="chapter" data-level="14.5.3" data-path="style.html"><a href="style.html#style-naming-datasets"><i class="fa fa-check"></i><b>14.5.3</b> Datasets</a></li>
<li class="chapter" data-level="14.5.4" data-path="style.html"><a href="style.html#style-naming-semantic"><i class="fa fa-check"></i><b>14.5.4</b> Semantic sorting</a></li>
</ul></li>
<li class="chapter" data-level="14.6" data-path="style.html"><a href="style.html#style-whitespace"><i class="fa fa-check"></i><b>14.6</b> Whitespace</a></li>
<li class="chapter" data-level="14.7" data-path="style.html"><a href="style.html#style-database"><i class="fa fa-check"></i><b>14.7</b> Database</a></li>
<li class="chapter" data-level="14.8" data-path="style.html"><a href="style.html#style-ggplot"><i class="fa fa-check"></i><b>14.8</b> ggplot2</a>
<ul>
<li class="chapter" data-level="14.8.1" data-path="style.html"><a href="style.html#style-ggplot-order"><i class="fa fa-check"></i><b>14.8.1</b> Order of commands</a></li>
<li class="chapter" data-level="14.8.2" data-path="style.html"><a href="style.html#style-ggplot-gotchas"><i class="fa fa-check"></i><b>14.8.2</b> Gotchas</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="publication.html"><a href="publication.html"><i class="fa fa-check"></i><b>15</b> Publishing Results</a>
<ul>
<li class="chapter" data-level="15.1" data-path="publication.html"><a href="publication.html#publication-analysts"><i class="fa fa-check"></i><b>15.1</b> To Other Analysts</a></li>
<li class="chapter" data-level="15.2" data-path="publication.html"><a href="publication.html#publication-experts"><i class="fa fa-check"></i><b>15.2</b> To Researchers &amp; Content Experts</a></li>
<li class="chapter" data-level="15.3" data-path="publication.html"><a href="publication.html#publication-phobic"><i class="fa fa-check"></i><b>15.3</b> To Technical-Phobic Audiences</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="testing-and-validation.html"><a href="testing-and-validation.html"><i class="fa fa-check"></i><b>16</b> Testing, Validation, &amp; Defensive Programming</a>
<ul>
<li class="chapter" data-level="16.1" data-path="testing-and-validation.html"><a href="testing-and-validation.html#testing-functions"><i class="fa fa-check"></i><b>16.1</b> Testing Functions</a></li>
<li class="chapter" data-level="16.2" data-path="testing-and-validation.html"><a href="testing-and-validation.html#defensive-programming"><i class="fa fa-check"></i><b>16.2</b> Defensive Programming</a></li>
<li class="chapter" data-level="16.3" data-path="testing-and-validation.html"><a href="testing-and-validation.html#validator"><i class="fa fa-check"></i><b>16.3</b> Validator</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="troubleshooting.html"><a href="troubleshooting.html"><i class="fa fa-check"></i><b>17</b> Troubleshooting and Debugging</a>
<ul>
<li class="chapter" data-level="17.1" data-path="troubleshooting.html"><a href="troubleshooting.html#finding-help"><i class="fa fa-check"></i><b>17.1</b> Finding Help</a></li>
<li class="chapter" data-level="17.2" data-path="troubleshooting.html"><a href="troubleshooting.html#debugging"><i class="fa fa-check"></i><b>17.2</b> Debugging</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="workstation.html"><a href="workstation.html"><i class="fa fa-check"></i><b>18</b> Workstation</a>
<ul>
<li class="chapter" data-level="18.1" data-path="workstation.html"><a href="workstation.html#workstation-required"><i class="fa fa-check"></i><b>18.1</b> Required Installation</a>
<ul>
<li class="chapter" data-level="18.1.1" data-path="workstation.html"><a href="workstation.html#workstation-r"><i class="fa fa-check"></i><b>18.1.1</b> R</a></li>
<li class="chapter" data-level="18.1.2" data-path="workstation.html"><a href="workstation.html#workstation-rstudio"><i class="fa fa-check"></i><b>18.1.2</b> RStudio</a></li>
<li class="chapter" data-level="18.1.3" data-path="workstation.html"><a href="workstation.html#workstation-r-package-installation"><i class="fa fa-check"></i><b>18.1.3</b> Installing R Packages</a></li>
<li class="chapter" data-level="18.1.4" data-path="workstation.html"><a href="workstation.html#workstation-r-package-update"><i class="fa fa-check"></i><b>18.1.4</b> Updating R Packages</a></li>
<li class="chapter" data-level="18.1.5" data-path="workstation.html"><a href="workstation.html#workstation-github"><i class="fa fa-check"></i><b>18.1.5</b> GitHub</a></li>
<li class="chapter" data-level="18.1.6" data-path="workstation.html"><a href="workstation.html#workstation-github-client"><i class="fa fa-check"></i><b>18.1.6</b> GitHub Desktop</a></li>
<li class="chapter" data-level="18.1.7" data-path="workstation.html"><a href="workstation.html#workstation-rtools"><i class="fa fa-check"></i><b>18.1.7</b> R Tools</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="workstation.html"><a href="workstation.html#workstation-recommended"><i class="fa fa-check"></i><b>18.2</b> Recommended Installation</a>
<ul>
<li class="chapter" data-level="18.2.1" data-path="workstation.html"><a href="workstation.html#workstation-odbc"><i class="fa fa-check"></i><b>18.2.1</b> ODBC Driver</a></li>
<li class="chapter" data-level="18.2.2" data-path="workstation.html"><a href="workstation.html#workstation-notepadpp"><i class="fa fa-check"></i><b>18.2.2</b> Notepad++</a></li>
<li class="chapter" data-level="18.2.3" data-path="workstation.html"><a href="workstation.html#workstation-ads"><i class="fa fa-check"></i><b>18.2.3</b> Azure Data Studio</a></li>
<li class="chapter" data-level="18.2.4" data-path="workstation.html"><a href="workstation.html#workstation-vscode"><i class="fa fa-check"></i><b>18.2.4</b> Visual Studio Code</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="workstation.html"><a href="workstation.html#workstation-optional"><i class="fa fa-check"></i><b>18.3</b> Optional Installation</a>
<ul>
<li class="chapter" data-level="18.3.1" data-path="workstation.html"><a href="workstation.html#workstation-git"><i class="fa fa-check"></i><b>18.3.1</b> Git</a></li>
<li class="chapter" data-level="18.3.2" data-path="workstation.html"><a href="workstation.html#workstation-calc"><i class="fa fa-check"></i><b>18.3.2</b> LibreOffice Calc</a></li>
<li class="chapter" data-level="18.3.3" data-path="workstation.html"><a href="workstation.html#workstation-pandoc"><i class="fa fa-check"></i><b>18.3.3</b> pandoc</a></li>
<li class="chapter" data-level="18.3.4" data-path="workstation.html"><a href="workstation.html#workstation-python"><i class="fa fa-check"></i><b>18.3.4</b> Python</a></li>
<li class="chapter" data-level="18.3.5" data-path="workstation.html"><a href="workstation.html#workstation-pilot-edit"><i class="fa fa-check"></i><b>18.3.5</b> PilotEdit</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="workstation.html"><a href="workstation.html#workstation-assets"><i class="fa fa-check"></i><b>18.4</b> Asset Locations</a></li>
<li class="chapter" data-level="18.5" data-path="workstation.html"><a href="workstation.html#workstation-administrator"><i class="fa fa-check"></i><b>18.5</b> Administrator Installation</a>
<ul>
<li class="chapter" data-level="18.5.1" data-path="workstation.html"><a href="workstation.html#workstation-mysql"><i class="fa fa-check"></i><b>18.5.1</b> MySQL Workbench</a></li>
<li class="chapter" data-level="18.5.2" data-path="workstation.html"><a href="workstation.html#workstation-postman"><i class="fa fa-check"></i><b>18.5.2</b> Postman</a></li>
<li class="chapter" data-level="18.5.3" data-path="workstation.html"><a href="workstation.html#workstation-ssms"><i class="fa fa-check"></i><b>18.5.3</b> SQL Server Management Studio (SSMS)</a></li>
<li class="chapter" data-level="18.5.4" data-path="workstation.html"><a href="workstation.html#workstation-winscp"><i class="fa fa-check"></i><b>18.5.4</b> WinSCP</a></li>
</ul></li>
<li class="chapter" data-level="18.6" data-path="workstation.html"><a href="workstation.html#workstation-troubleshooting"><i class="fa fa-check"></i><b>18.6</b> Installation Troubleshooting</a></li>
<li class="chapter" data-level="18.7" data-path="workstation.html"><a href="workstation.html#workstation-ubuntu"><i class="fa fa-check"></i><b>18.7</b> Ubuntu Installation</a></li>
<li class="chapter" data-level="18.8" data-path="workstation.html"><a href="workstation.html#workstation-retired"><i class="fa fa-check"></i><b>18.8</b> Retired Tools</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="tools.html"><a href="tools.html"><i class="fa fa-check"></i><b>19</b> Considerations when Selecting Tools</a>
<ul>
<li class="chapter" data-level="19.1" data-path="tools.html"><a href="tools.html#general"><i class="fa fa-check"></i><b>19.1</b> General</a>
<ul>
<li class="chapter" data-level="19.1.1" data-path="tools.html"><a href="tools.html#the-components-goal"><i class="fa fa-check"></i><b>19.1.1</b> The Component’s Goal</a></li>
<li class="chapter" data-level="19.1.2" data-path="tools.html"><a href="tools.html#current-skillset-of-team"><i class="fa fa-check"></i><b>19.1.2</b> Current Skillset of Team</a></li>
<li class="chapter" data-level="19.1.3" data-path="tools.html"><a href="tools.html#desired-future-skillset-of-team"><i class="fa fa-check"></i><b>19.1.3</b> Desired Future Skillset of Team</a></li>
<li class="chapter" data-level="19.1.4" data-path="tools.html"><a href="tools.html#skillset-of-audience"><i class="fa fa-check"></i><b>19.1.4</b> Skillset of Audience</a></li>
</ul></li>
<li class="chapter" data-level="19.2" data-path="tools.html"><a href="tools.html#languages"><i class="fa fa-check"></i><b>19.2</b> Languages</a></li>
<li class="chapter" data-level="19.3" data-path="tools.html"><a href="tools.html#r-packages"><i class="fa fa-check"></i><b>19.3</b> R Packages</a></li>
<li class="chapter" data-level="19.4" data-path="tools.html"><a href="tools.html#database"><i class="fa fa-check"></i><b>19.4</b> Database</a></li>
<li class="chapter" data-level="19.5" data-path="tools.html"><a href="tools.html#additional-resources-2"><i class="fa fa-check"></i><b>19.5</b> Additional Resources</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="team.html"><a href="team.html"><i class="fa fa-check"></i><b>20</b> Growing a Team</a>
<ul>
<li class="chapter" data-level="20.1" data-path="team.html"><a href="team.html#recruiting"><i class="fa fa-check"></i><b>20.1</b> Recruiting</a></li>
<li class="chapter" data-level="20.2" data-path="team.html"><a href="team.html#training-to-data-science"><i class="fa fa-check"></i><b>20.2</b> Training to Data Science</a></li>
<li class="chapter" data-level="20.3" data-path="team.html"><a href="team.html#bridges-outside-the-team"><i class="fa fa-check"></i><b>20.3</b> Bridges Outside the Team</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="redcap-user.html"><a href="redcap-user.html"><i class="fa fa-check"></i><b>21</b> Material for REDCap Users</a>
<ul>
<li class="chapter" data-level="21.1" data-path="redcap-user.html"><a href="redcap-user.html#redcap-user-login"><i class="fa fa-check"></i><b>21.1</b> Login</a></li>
<li class="chapter" data-level="21.2" data-path="redcap-user.html"><a href="redcap-user.html#redcap-user-report-develop"><i class="fa fa-check"></i><b>21.2</b> Developing Reports</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="redcap-developer.html"><a href="redcap-developer.html"><i class="fa fa-check"></i><b>22</b> Material for REDCap Developers</a></li>
<li class="chapter" data-level="23" data-path="redcap-admin.html"><a href="redcap-admin.html"><i class="fa fa-check"></i><b>23</b> Material for REDCap Admins</a></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="git.html"><a href="git.html"><i class="fa fa-check"></i><b>A</b> Git &amp; GitHub</a>
<ul>
<li class="chapter" data-level="A.1" data-path="git.html"><a href="git.html#git-justification"><i class="fa fa-check"></i><b>A.1</b> Justification</a></li>
<li class="chapter" data-level="A.2" data-path="git.html"><a href="git.html#git-code"><i class="fa fa-check"></i><b>A.2</b> for Code Development</a></li>
<li class="chapter" data-level="A.3" data-path="git.html"><a href="git.html#git-collaboration"><i class="fa fa-check"></i><b>A.3</b> for Collaboration</a></li>
<li class="chapter" data-level="A.4" data-path="git.html"><a href="git.html#git-stability"><i class="fa fa-check"></i><b>A.4</b> for Stability</a></li>
<li class="chapter" data-level="A.5" data-path="git.html"><a href="git.html#organization-wide-defaults-and-practices"><i class="fa fa-check"></i><b>A.5</b> Organization-wide defaults and practices</a></li>
<li class="chapter" data-level="A.6" data-path="git.html"><a href="git.html#git-collaborators"><i class="fa fa-check"></i><b>A.6</b> for New Collaborators</a></li>
<li class="chapter" data-level="A.7" data-path="git.html"><a href="git.html#git-contribution"><i class="fa fa-check"></i><b>A.7</b> Steps for Contributing to Repo</a>
<ul>
<li class="chapter" data-level="A.7.1" data-path="git.html"><a href="git.html#git-contribution-regular"><i class="fa fa-check"></i><b>A.7.1</b> Regular Contributions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="B" data-path="snippets.html"><a href="snippets.html"><i class="fa fa-check"></i><b>B</b> Snippets</a>
<ul>
<li class="chapter" data-level="B.1" data-path="snippets.html"><a href="snippets.html#snippets-reading"><i class="fa fa-check"></i><b>B.1</b> Reading External Data</a>
<ul>
<li class="chapter" data-level="B.1.1" data-path="snippets.html"><a href="snippets.html#snippets-reading-excel"><i class="fa fa-check"></i><b>B.1.1</b> Reading from Excel</a></li>
<li class="chapter" data-level="B.1.2" data-path="snippets.html"><a href="snippets.html#snippets-reading-trailing-comma"><i class="fa fa-check"></i><b>B.1.2</b> Removing Trailing Comma from Header</a></li>
<li class="chapter" data-level="B.1.3" data-path="snippets.html"><a href="snippets.html#snippets-reading-vroom"><i class="fa fa-check"></i><b>B.1.3</b> Removing Trailing Comma from Header</a></li>
</ul></li>
<li class="chapter" data-level="B.2" data-path="snippets.html"><a href="snippets.html#snippets-grooming"><i class="fa fa-check"></i><b>B.2</b> Grooming</a>
<ul>
<li class="chapter" data-level="B.2.1" data-path="snippets.html"><a href="snippets.html#snippets-grooming-two-year"><i class="fa fa-check"></i><b>B.2.1</b> Correct for misinterpreted two-digit year</a></li>
</ul></li>
<li class="chapter" data-level="B.3" data-path="snippets.html"><a href="snippets.html#snippets-identification"><i class="fa fa-check"></i><b>B.3</b> Identification</a>
<ul>
<li class="chapter" data-level="B.3.1" data-path="snippets.html"><a href="snippets.html#snippets-identification-tags"><i class="fa fa-check"></i><b>B.3.1</b> Generating “tags”</a></li>
</ul></li>
<li class="chapter" data-level="B.4" data-path="snippets.html"><a href="snippets.html#snippets-correspondence"><i class="fa fa-check"></i><b>B.4</b> Correspondence with Collaborators</a>
<ul>
<li class="chapter" data-level="B.4.1" data-path="snippets.html"><a href="snippets.html#snippets-correspondence-excel"><i class="fa fa-check"></i><b>B.4.1</b> Excel files</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="C" data-path="presentations.html"><a href="presentations.html"><i class="fa fa-check"></i><b>C</b> Presentations</a>
<ul>
<li class="chapter" data-level="C.1" data-path="presentations.html"><a href="presentations.html#cdw"><i class="fa fa-check"></i><b>C.1</b> CDW</a></li>
<li class="chapter" data-level="C.2" data-path="presentations.html"><a href="presentations.html#redcap"><i class="fa fa-check"></i><b>C.2</b> REDCap</a></li>
<li class="chapter" data-level="C.3" data-path="presentations.html"><a href="presentations.html#reproducible-research-visualization"><i class="fa fa-check"></i><b>C.3</b> Reproducible Research &amp; Visualization</a></li>
<li class="chapter" data-level="C.4" data-path="presentations.html"><a href="presentations.html#data-management"><i class="fa fa-check"></i><b>C.4</b> Data Management</a></li>
<li class="chapter" data-level="C.5" data-path="presentations.html"><a href="presentations.html#github-1"><i class="fa fa-check"></i><b>C.5</b> GitHub</a></li>
<li class="chapter" data-level="C.6" data-path="presentations.html"><a href="presentations.html#software"><i class="fa fa-check"></i><b>C.6</b> Software</a></li>
<li class="chapter" data-level="C.7" data-path="presentations.html"><a href="presentations.html#architectures"><i class="fa fa-check"></i><b>C.7</b> Architectures</a></li>
<li class="chapter" data-level="C.8" data-path="presentations.html"><a href="presentations.html#components"><i class="fa fa-check"></i><b>C.8</b> Components</a></li>
</ul></li>
<li class="chapter" data-level="D" data-path="scratch-pad.html"><a href="scratch-pad.html"><i class="fa fa-check"></i><b>D</b> Scratch Pad of Loose Ideas</a>
<ul>
<li class="chapter" data-level="D.1" data-path="scratch-pad.html"><a href="scratch-pad.html#chapters-sections-to-form"><i class="fa fa-check"></i><b>D.1</b> Chapters &amp; Sections to Form</a></li>
<li class="chapter" data-level="D.2" data-path="scratch-pad.html"><a href="scratch-pad.html#practices"><i class="fa fa-check"></i><b>D.2</b> Practices</a></li>
<li class="chapter" data-level="D.3" data-path="scratch-pad.html"><a href="scratch-pad.html#good-sites"><i class="fa fa-check"></i><b>D.3</b> Good Sites</a></li>
</ul></li>
<li class="chapter" data-level="E" data-path="example-dashboard.html"><a href="example-dashboard.html"><i class="fa fa-check"></i><b>E</b> Example Dashboard</a>
<ul>
<li class="chapter" data-level="E.1" data-path="example-dashboard.html"><a href="example-dashboard.html#example-dashboard-example"><i class="fa fa-check"></i><b>E.1</b> Example</a></li>
<li class="chapter" data-level="E.2" data-path="example-dashboard.html"><a href="example-dashboard.html#example-dashboard-guide"><i class="fa fa-check"></i><b>E.2</b> Style Guide</a>
<ul>
<li class="chapter" data-level="E.2.1" data-path="example-dashboard.html"><a href="example-dashboard.html#headline-page"><i class="fa fa-check"></i><b>E.2.1</b> Headline page</a></li>
<li class="chapter" data-level="E.2.2" data-path="example-dashboard.html"><a href="example-dashboard.html#tables-page"><i class="fa fa-check"></i><b>E.2.2</b> Tables page</a></li>
<li class="chapter" data-level="E.2.3" data-path="example-dashboard.html"><a href="example-dashboard.html#graphs-page"><i class="fa fa-check"></i><b>E.2.3</b> Graphs page</a></li>
<li class="chapter" data-level="E.2.4" data-path="example-dashboard.html"><a href="example-dashboard.html#marginal-graphs-page"><i class="fa fa-check"></i><b>E.2.4</b> Marginal Graphs page</a></li>
<li class="chapter" data-level="E.2.5" data-path="example-dashboard.html"><a href="example-dashboard.html#documentation-page"><i class="fa fa-check"></i><b>E.2.5</b> Documentation page</a></li>
<li class="chapter" data-level="E.2.6" data-path="example-dashboard.html"><a href="example-dashboard.html#miscellaneous-notes"><i class="fa fa-check"></i><b>E.2.6</b> Miscellaneous Notes</a></li>
</ul></li>
<li class="chapter" data-level="E.3" data-path="example-dashboard.html"><a href="example-dashboard.html#example-dashboard-architecture"><i class="fa fa-check"></i><b>E.3</b> Architecture</a>
<ul>
<li class="chapter" data-level="E.3.1" data-path="example-dashboard.html"><a href="example-dashboard.html#data-from-external-system"><i class="fa fa-check"></i><b>E.3.1</b> Data from External System</a></li>
<li class="chapter" data-level="E.3.2" data-path="example-dashboard.html"><a href="example-dashboard.html#groomed-data-in-warehouse"><i class="fa fa-check"></i><b>E.3.2</b> Groomed Data in Warehouse</a></li>
<li class="chapter" data-level="E.3.3" data-path="example-dashboard.html"><a href="example-dashboard.html#analysis-ready-dataset"><i class="fa fa-check"></i><b>E.3.3</b> Analysis-Ready Dataset</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="F" data-path="example-chapter.html"><a href="example-chapter.html"><i class="fa fa-check"></i><b>F</b> Example Chapter</a></li>
<li class="chapter" data-level="G" data-path="acknowledgements.html"><a href="acknowledgements.html"><i class="fa fa-check"></i><b>G</b> Acknowledgements</a></li>
<li class="chapter" data-level="H" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>H</b> References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Collaborative Data Science Practices</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="file-prototype-r" class="section level1" number="4">
<h1><span class="header-section-number">Chapter 4</span> Prototypical R File</h1>
<p>As stated in <a href="architecture.html#consistency-files">Consistency across Files</a>, using a consistent file structure can (a) improve the quality of the code because the structure has been proven over time to facilitate good practices and (b) allow your intentions to be more clear to teammates because they are familiar with the order and intentions of the chunks.</p>
<p>We use the term “chunk” for a section of code because it corresponds with knitr terminology <span class="citation">(<a href="#ref-xie2015" role="doc-biblioref">Xie 2015</a>)</span>, and in many analysis files (as opposed to manipulation files), the chunk of our R file connects to a knitr Rmd file.</p>
<div id="chunk-clear" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Clear Memory</h2>
<p>Before the initial chunk many of our files clear the memory of variables from previous run. This is important when developing and debugging because it prevents previous runs from contaminating subsequent runs. However it has little effect during production; we’ll look at manipulation files separately from analysis files.</p>
<p>Manipulation R files are <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/source.html"><code>source</code></a>d with the argument <code>local=new.env()</code>. The file is executed in a fresh environment, so there are no variables to clear. Analysis R files are typically called from an Rmd file’s <code>knitr::read_chunk()</code>, and code positioned above the first chunk is not called by knitr <a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>.</p>
<p>However typically do not clear the memory in R files that are <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/source.html"><code>source</code></a>d in the same environment as the caller, as it will interfere with the caller’s variables.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="file-prototype-r.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>(<span class="at">all.names =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
</div>
<div id="chunk-load-sources" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Load Sources</h2>
<p>In the first true chunk, <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/source.html"><code>source</code></a> any R files containing global variables and functions that the current file requires. For instance, when a team of statisticians is producing a large report containing many analysis files, we define many of the graphical elements in a single file. This sourced file defines common color palettes and graphical functions so the cosmetics are more uniform across analyses.</p>
<p>We prefer not to have <code>source</code>d files perform any real action, such as importing data or manipulating a file. One reason is because it is difficult to be consistent about the environmental variables when the sourced file’s functions are run. A second reason is that it more cognitively difficult to understand how the files are connected.</p>
<p>When the sourced file contains only function definitions, these operations can be called at any time in the current file with much tighter control of which variables are modified. A bonus of the discipline of defining functions (instead of executing functions) is that the operations are typically more robust and generalizable.</p>
<p>Keep the chunk even if no files are sourced. An empty chunk is instructive to readers trying to determine if any files are sourced. This applies recommendation applies to all the chunks discussed in this chapter. As always, your team should agree on its own set of standards.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="file-prototype-r.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- load-sources ------------------------------------------------------------</span></span>
<span id="cb10-2"><a href="file-prototype-r.html#cb10-2" aria-hidden="true" tabindex="-1"></a>base<span class="sc">::</span><span class="fu">source</span>(<span class="at">file=</span><span class="st">&quot;./analysis/common/display-1.R&quot;</span>)      <span class="co"># Load common graphing functions.</span></span></code></pre></div>
</div>
<div id="chunk-load-packages" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Load Packages</h2>
<p>The ‘load-packages’ chunk declares required packages near the file’s beginning for three reasons. First, a reader scanning the file can quickly determine its dependencies when located in a single chunk. Second, if your machine is lacking a required package, it is best to know early<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a>. Third, this style mimics a requirement of other languages (such as declaring headers at the top of a C++ file) and follows the <a href="https://style.tidyverse.org/files.html#internal-structure">tidyverse style guide</a>.</p>
<p>As discussed in the previous <a href="#qualify-functions">qualify all functions</a> section, we recommend that functions are qualified with their package (<em>e.g.</em>, <code>foo::bar()</code> instead of merely <code>bar()</code>). Consequently, the ‘load-packages’ chunk calls <code>requireNamespace()</code> more frequently than <code>library()</code>. <code>requireNamespace()</code> verifies the package is available on the local machine, but does not load it into memory; <code>library()</code> verifies the package is available, and then loads it.</p>
<p><code>requireNamespace()</code> is not used in several scenarios.</p>
<ol style="list-style-type: decimal">
<li>Core packages (<em>e.g.</em>, ‘base’ and ‘stats’) are loaded by R in most default installations. We avoid unnecessary calls like <code>library(stats)</code> because they distract from more important features.</li>
<li>Obvious dependencies are not called by <code>requireNamespace()</code> or <code>library()</code> for similar reasons, especially if they are not called directly. For example ‘tidyselect’ is not listed when ‘tidyr’ is listed.</li>
<li>The “pipe” function (declared in the ‘magrittr’ package , <em>i.e.</em>, <code>%&gt;%</code>) is attached with <code>import::from(magrittr, "%&gt;%")</code>. This frequently-used function called be called throughout the execution without qualification.</li>
<li>Compared to manipulation files, our analysis files tend to use many functions in a few concentrated packages so conflicting function names are less common. Typical packages used in analysis are ‘ggplot2’ and ‘lme4’.</li>
</ol>
<p>The <code>source</code>d files above may load their own packages (by calling <code>library()</code>). It is important that the <code>library()</code> calls in this file follow the ‘load-sources’ chunk so that identically-named functions (in different packages) are called with the correct precedent. Otherwise identically-named functions will conflict in the namespace with hard-to-predict results.</p>
<p>Read <a href="http://r-pkgs.had.co.nz/namespace.html#search-path">R Packages</a> for more about <code>library()</code>, <code>requireNamespace()</code>, and their siblings, as well as the larger concepts such as attaching functions into the search path.</p>
<p>Here are packages found in most of our manipulation files. Notice the lesser-known packages have a quick explanation; this helps maintainers decide if the declaration is still necessary. Also notice the packages distributed outside of CRAN (<em>e.g.</em>, GitHub) have a quick commented line to help the user install or update the package.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="file-prototype-r.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- load-packages -----------------------------------------------------------</span></span>
<span id="cb11-2"><a href="file-prototype-r.html#cb11-2" aria-hidden="true" tabindex="-1"></a>import<span class="sc">::</span><span class="fu">from</span>(magrittr, <span class="st">&quot;%&gt;%&quot;</span> )</span>
<span id="cb11-3"><a href="file-prototype-r.html#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="file-prototype-r.html#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="fu">requireNamespace</span>(<span class="st">&quot;readr&quot;</span>     )</span>
<span id="cb11-5"><a href="file-prototype-r.html#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="fu">requireNamespace</span>(<span class="st">&quot;tidyr&quot;</span>     )</span>
<span id="cb11-6"><a href="file-prototype-r.html#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="fu">requireNamespace</span>(<span class="st">&quot;dplyr&quot;</span>     )</span>
<span id="cb11-7"><a href="file-prototype-r.html#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="fu">requireNamespace</span>(<span class="st">&quot;config&quot;</span>    )</span>
<span id="cb11-8"><a href="file-prototype-r.html#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="fu">requireNamespace</span>(<span class="st">&quot;checkmate&quot;</span> ) <span class="co"># Asserts expected conditions</span></span>
<span id="cb11-9"><a href="file-prototype-r.html#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="fu">requireNamespace</span>(<span class="st">&quot;OuhscMunge&quot;</span>) <span class="co"># remotes::install_github(repo=&quot;OuhscBbmc/OuhscMunge&quot;)</span></span></code></pre></div>
</div>
<div id="chunk-declare" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> Declare Globals</h2>
<p>When values are repeatedly used within a file, consider dedicating a variable so it’s defined and set only once. This is also a good place for variables that are used only once, but whose value are central to the file’s mission. Typical variables in our ‘declare-globals’ chunk include data file paths, data file variables, color palettes, and values in the <em>config</em> file.</p>
<p>The <a href="repo-prototype.html#repo-root">config file</a> can coordinate a static variable across multiple files. Centrally</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="file-prototype-r.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- declare-globals ---------------------------------------------------------</span></span>
<span id="cb12-2"><a href="file-prototype-r.html#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Constant values that won&#39;t change.</span></span>
<span id="cb12-3"><a href="file-prototype-r.html#cb12-3" aria-hidden="true" tabindex="-1"></a>config                         <span class="ot">&lt;-</span> config<span class="sc">::</span><span class="fu">get</span>()</span>
<span id="cb12-4"><a href="file-prototype-r.html#cb12-4" aria-hidden="true" tabindex="-1"></a>path_db                        <span class="ot">&lt;-</span> config<span class="sc">$</span>path_database</span>
<span id="cb12-5"><a href="file-prototype-r.html#cb12-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-6"><a href="file-prototype-r.html#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Execute to specify the column types.  It might require some manual adjustment (eg doubles to integers).</span></span>
<span id="cb12-7"><a href="file-prototype-r.html#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co">#   OuhscMunge::readr_spec_aligned(config$path_subject_1_raw)</span></span>
<span id="cb12-8"><a href="file-prototype-r.html#cb12-8" aria-hidden="true" tabindex="-1"></a>col_types <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">cols_only</span>(</span>
<span id="cb12-9"><a href="file-prototype-r.html#cb12-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">subject_id          =</span> readr<span class="sc">::</span><span class="fu">col_integer</span>(),</span>
<span id="cb12-10"><a href="file-prototype-r.html#cb12-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">county_id           =</span> readr<span class="sc">::</span><span class="fu">col_integer</span>(),</span>
<span id="cb12-11"><a href="file-prototype-r.html#cb12-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">gender_id           =</span> readr<span class="sc">::</span><span class="fu">col_double</span>(),</span>
<span id="cb12-12"><a href="file-prototype-r.html#cb12-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">race                =</span> readr<span class="sc">::</span><span class="fu">col_character</span>(),</span>
<span id="cb12-13"><a href="file-prototype-r.html#cb12-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">ethnicity           =</span> readr<span class="sc">::</span><span class="fu">col_character</span>()</span>
<span id="cb12-14"><a href="file-prototype-r.html#cb12-14" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="chunk-load-data" class="section level2" number="4.5">
<h2><span class="header-section-number">4.5</span> Load Data</h2>
<p>All data ingested by this file occurs in this chunk. We like to think of each file as a linear pipe with a single point of input and single point of output. Although it is possible for a file to read data files on any line, we recommend avoiding this sprawl because it is more difficult for humans to understand. If the software developer is a deist watchmaker, the file’s fate has been sealed by the end of this chunk. This makes is easier for a human to reason to isolate problems as either existing with (a) the incoming data or (b) the calculations on that data.</p>
<p>Ideally this chunk consumes data from either a plain-text csv or a database.</p>
<p>Many capable R functions and packages ingest data. We prefer the tidyverse <a href="https://readr.tidyverse.org/">readr</a> for reading conventional files; its younger cousin, <a href="https://vroom.r-lib.org/">vroom</a> has some nice advantages when working with larger files and some forms of jagged rectangles<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a>. Depending on the file format, good packages to consider are <a href="https://cran.r-project.org/package=data.table">data.table</a>, <a href="https://haven.tidyverse.org/">haven</a>, <a href="https://readxl.tidyverse.org/">readxl</a>, <a href="https://ycphs.github.io/openxlsx/">openxlsx</a>, <a href="https://CRAN.R-project.org/package=arrow">arrow</a>, <a href="https://CRAN.R-project.org/package=jsonlite">jsonlite</a>, <a href="http://www.fstpackage.org/">fst</a>, <a href="https://CRAN.R-project.org/package=yaml">yaml</a>, and <a href="https://cloud.r-project.org/web/packages/rio/vignettes/rio.html">rio</a>.</p>
<p>When used in an <a href="patterns.html#pattern-ellis">Ellis</a>, this chunk likely consumes a flat file like a csv with data or metadata. When used in a <a href="patterns.html#pattern-ferry">Ferry</a>, <a href="patterns.html#pattern-arch">Arch</a>, or <a href="patterns.html#pattern-scribe">Scribe</a>, this chunk likely consumes a database table. When used in an <a href="patterns.html#pattern-analysis">Analysis file</a>, this chunk likely consumes a database table or rds (<em>i.e.</em>, a compressed R data file).</p>
<p>In some large-scale scenarios, there may be a series of datasets that cannot be held in RAM simultaneously. Our first choice is to split the R file so each new file has only a subset of the datasets –in other words, the R file probably was given too much responsibility. Occassionaly the multiple datasets need to be considered at once, so splitting the R file is not a option. In these scenarios, we prefer to upload all the datasets to a database, which is better manipulating datasets too large for RAM.</p>
<p>An R solution may be to loosen the restriction that dataset enter the R file only during the ‘load-data’ chunk. Once a dataset is processed and no longer needed, <code>rm()</code> <em>r</em>e<em>m</em>oves it from RAM. Now another dataset can be read from a file and manipulated.</p>
<p><em>loose scrap</em>:
the chunk reads all data (<em>e.g.</em>, database table, networked CSV, local lookup table). After this chunk, no new data should be introduced. This is for the sake of reducing human cognition load. Everything below this chunk is derived from these first four chunks.</p>
</div>
<div id="chunk-tweak-data" class="section level2" number="4.6">
<h2><span class="header-section-number">4.6</span> Tweak Data</h2>
<p><em>loose scrap</em>:
It’s best to rename the dataset (a) in a single place and (b) early in the pipeline, so the bad variable are never referenced.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="file-prototype-r.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># OuhscMunge::column_rename_headstart(ds) # Help write `dplyr::select()` call.</span></span>
<span id="cb13-2"><a href="file-prototype-r.html#cb13-2" aria-hidden="true" tabindex="-1"></a>ds <span class="ot">&lt;-</span></span>
<span id="cb13-3"><a href="file-prototype-r.html#cb13-3" aria-hidden="true" tabindex="-1"></a>  ds <span class="sc">%&gt;%</span></span>
<span id="cb13-4"><a href="file-prototype-r.html#cb13-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(    <span class="co"># `dplyr::select()` drops columns not included.</span></span>
<span id="cb13-5"><a href="file-prototype-r.html#cb13-5" aria-hidden="true" tabindex="-1"></a>    subject_id,</span>
<span id="cb13-6"><a href="file-prototype-r.html#cb13-6" aria-hidden="true" tabindex="-1"></a>    county_id,</span>
<span id="cb13-7"><a href="file-prototype-r.html#cb13-7" aria-hidden="true" tabindex="-1"></a>    gender_id,</span>
<span id="cb13-8"><a href="file-prototype-r.html#cb13-8" aria-hidden="true" tabindex="-1"></a>    race,</span>
<span id="cb13-9"><a href="file-prototype-r.html#cb13-9" aria-hidden="true" tabindex="-1"></a>    ethnicity</span>
<span id="cb13-10"><a href="file-prototype-r.html#cb13-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb13-11"><a href="file-prototype-r.html#cb13-11" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb13-12"><a href="file-prototype-r.html#cb13-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-13"><a href="file-prototype-r.html#cb13-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb13-14"><a href="file-prototype-r.html#cb13-14" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(subject_id) <span class="co"># %&gt;%</span></span>
<span id="cb13-15"><a href="file-prototype-r.html#cb13-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># tibble::rowid_to_column(&quot;subject_id&quot;) # Add a unique index if necessary</span></span></code></pre></div>
</div>
<div id="chunk-unique" class="section level2" number="4.7">
<h2><span class="header-section-number">4.7</span> (Unique Content)</h2>
<p>This section represents all the chunks between <a href="file-prototype-r.html#chunk-tweak-data">tweak-data</a> and <a href="file-prototype-r.html#chunk-verify-values">verify-values</a>. These chunks contain most of of the file’s creativity and contribution. In a sense, the structure of the first and last chunks allow these middle chunks to focus on concepts instead of plumbing.</p>
<p>For simple files like the ellis of a metadata file, may not even need anything here. But complex analysis files may have 200+ lines distributed across a dozen chunks. We recommend that you create dedicate a chunk to each conceptual stage. If one starts to contain more than ~20 lines, consider if a more granular organization would clarify the code’s intent.</p>
</div>
<div id="chunk-verify-values" class="section level2" number="4.8">
<h2><span class="header-section-number">4.8</span> Verify Values</h2>
<p>Running <code>OuhscMunge::verify_value_headstart(ds)</code> will</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="file-prototype-r.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- verify-values -----------------------------------------------------------</span></span>
<span id="cb14-2"><a href="file-prototype-r.html#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Sniff out problems</span></span>
<span id="cb14-3"><a href="file-prototype-r.html#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co"># OuhscMunge::verify_value_headstart(ds)</span></span>
<span id="cb14-4"><a href="file-prototype-r.html#cb14-4" aria-hidden="true" tabindex="-1"></a>checkmate<span class="sc">::</span><span class="fu">assert_integer</span>(  ds<span class="sc">$</span>county_month_id    , <span class="at">any.missing=</span>F , <span class="at">lower=</span><span class="dv">1</span>, <span class="at">upper=</span><span class="dv">3080</span>                , <span class="at">unique=</span>T)</span>
<span id="cb14-5"><a href="file-prototype-r.html#cb14-5" aria-hidden="true" tabindex="-1"></a>checkmate<span class="sc">::</span><span class="fu">assert_integer</span>(  ds<span class="sc">$</span>county_id          , <span class="at">any.missing=</span>F , <span class="at">lower=</span><span class="dv">1</span>, <span class="at">upper=</span><span class="dv">77</span>                            )</span>
<span id="cb14-6"><a href="file-prototype-r.html#cb14-6" aria-hidden="true" tabindex="-1"></a>checkmate<span class="sc">::</span><span class="fu">assert_date</span>(     ds<span class="sc">$</span>month              , <span class="at">any.missing=</span>F , <span class="at">lower=</span><span class="fu">as.Date</span>(<span class="st">&quot;2012-06-15&quot;</span>), <span class="at">upper=</span><span class="fu">Sys.Date</span>())</span>
<span id="cb14-7"><a href="file-prototype-r.html#cb14-7" aria-hidden="true" tabindex="-1"></a>checkmate<span class="sc">::</span><span class="fu">assert_character</span>(ds<span class="sc">$</span>county_name        , <span class="at">any.missing=</span>F , <span class="at">pattern=</span><span class="st">&quot;^.{3,12}$&quot;</span>                          )</span>
<span id="cb14-8"><a href="file-prototype-r.html#cb14-8" aria-hidden="true" tabindex="-1"></a>checkmate<span class="sc">::</span><span class="fu">assert_integer</span>(  ds<span class="sc">$</span>region_id          , <span class="at">any.missing=</span>F , <span class="at">lower=</span><span class="dv">1</span>, <span class="at">upper=</span><span class="dv">20</span>                            )</span>
<span id="cb14-9"><a href="file-prototype-r.html#cb14-9" aria-hidden="true" tabindex="-1"></a>checkmate<span class="sc">::</span><span class="fu">assert_numeric</span>(  ds<span class="sc">$</span>fte                , <span class="at">any.missing=</span>F , <span class="at">lower=</span><span class="dv">0</span>, <span class="at">upper=</span><span class="dv">40</span>                            )</span>
<span id="cb14-10"><a href="file-prototype-r.html#cb14-10" aria-hidden="true" tabindex="-1"></a>checkmate<span class="sc">::</span><span class="fu">assert_logical</span>(  ds<span class="sc">$</span>fte_approximated   , <span class="at">any.missing=</span>F                                                )</span>
<span id="cb14-11"><a href="file-prototype-r.html#cb14-11" aria-hidden="true" tabindex="-1"></a>checkmate<span class="sc">::</span><span class="fu">assert_numeric</span>(  ds<span class="sc">$</span>fte_rolling_median , <span class="at">any.missing=</span>T , <span class="at">lower=</span><span class="dv">0</span>, <span class="at">upper=</span><span class="dv">40</span>                            )</span>
<span id="cb14-12"><a href="file-prototype-r.html#cb14-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-13"><a href="file-prototype-r.html#cb14-13" aria-hidden="true" tabindex="-1"></a>county_month_combo   <span class="ot">&lt;-</span> <span class="fu">paste</span>(ds<span class="sc">$</span>county_id, ds<span class="sc">$</span>month)</span>
<span id="cb14-14"><a href="file-prototype-r.html#cb14-14" aria-hidden="true" tabindex="-1"></a>checkmate<span class="sc">::</span><span class="fu">assert_character</span>(county_month_combo, <span class="at">pattern  =</span><span class="st">&quot;^</span><span class="sc">\\</span><span class="st">d{1,2} </span><span class="sc">\\</span><span class="st">d{4}-</span><span class="sc">\\</span><span class="st">d{2}-</span><span class="sc">\\</span><span class="st">d{2}$&quot;</span>, <span class="at">any.missing=</span>F, <span class="at">unique=</span>T)</span></code></pre></div>
</div>
<div id="chunk-specify-columns" class="section level2" number="4.9">
<h2><span class="header-section-number">4.9</span> Specify Output Columns</h2>
<p>This chunk:</p>
<ol style="list-style-type: decimal">
<li>verifies these variables exist before uploading,</li>
<li>documents (to troubleshooting developers) these variables are a product of the file, and</li>
<li>reorders the variables to match the expected structure.</li>
</ol>
<p>Variable order is especially important for the database engines/drivers that ignore the variable name, and use only the variable position.</p>
<p>We use the term ‘slim’ because typically this output has fewer variables than the full dataset processed by the file.</p>
<p>If you doubt the variable will be needed downstream, leave it in the <code>dplyr::select()</code>, but commented out. If someone needs it in the future, they’ll easily determine where it might come from, and then uncomment the line (and possibly modify the database table). Once you import a column into a warehouse that multiple people are using, it can be tough to remove without breaking their code.</p>
<p>This chunk follows <a href="file-prototype-r.html#chunk-verify-values">verify-values</a> because sometimes you want to check the validity of variables that are not consumed downstream. These variables are not important themselves, but an illegal value may reveal a larger problem with the dataset.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="file-prototype-r.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print colnames that `dplyr::select()`  should contain below:</span></span>
<span id="cb15-2"><a href="file-prototype-r.html#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co">#   cat(paste0(&quot;    &quot;, colnames(ds), collapse=&quot;,\n&quot;))</span></span>
<span id="cb15-3"><a href="file-prototype-r.html#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="file-prototype-r.html#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the subset of columns that will be needed in the analyses.</span></span>
<span id="cb15-5"><a href="file-prototype-r.html#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="co">#   The fewer columns that are exported, the fewer things that can break downstream.</span></span>
<span id="cb15-6"><a href="file-prototype-r.html#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="file-prototype-r.html#cb15-7" aria-hidden="true" tabindex="-1"></a>ds_slim <span class="ot">&lt;-</span></span>
<span id="cb15-8"><a href="file-prototype-r.html#cb15-8" aria-hidden="true" tabindex="-1"></a>  ds <span class="sc">%&gt;%</span></span>
<span id="cb15-9"><a href="file-prototype-r.html#cb15-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># dplyr::slice(1:100) %&gt;%</span></span>
<span id="cb15-10"><a href="file-prototype-r.html#cb15-10" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(</span>
<span id="cb15-11"><a href="file-prototype-r.html#cb15-11" aria-hidden="true" tabindex="-1"></a>    subject_id,</span>
<span id="cb15-12"><a href="file-prototype-r.html#cb15-12" aria-hidden="true" tabindex="-1"></a>    county_id,</span>
<span id="cb15-13"><a href="file-prototype-r.html#cb15-13" aria-hidden="true" tabindex="-1"></a>    gender_id,</span>
<span id="cb15-14"><a href="file-prototype-r.html#cb15-14" aria-hidden="true" tabindex="-1"></a>    race,</span>
<span id="cb15-15"><a href="file-prototype-r.html#cb15-15" aria-hidden="true" tabindex="-1"></a>    ethnicity</span>
<span id="cb15-16"><a href="file-prototype-r.html#cb15-16" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb15-17"><a href="file-prototype-r.html#cb15-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-18"><a href="file-prototype-r.html#cb15-18" aria-hidden="true" tabindex="-1"></a>ds_slim</span></code></pre></div>
</div>
<div id="save-to-disk-or-database" class="section level2" number="4.10">
<h2><span class="header-section-number">4.10</span> Save to Disk or Database</h2>
</div>
<div id="additional-resources" class="section level2" number="4.11">
<h2><span class="header-section-number">4.11</span> Additional Resources</h2>
<ul>
<li><span class="citation">(<a href="#ref-gillespie" role="doc-biblioref">Colin Gillespie 2017</a>)</span>, particularly the “Efficient input/output” chapter.</li>
</ul>

</div>
</div>
<h3><span class="header-section-number">H</span> References</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-gillespie" class="csl-entry">
Colin Gillespie, Robin Lovelace. 2017. <em>Efficient r Programming</em>. 1st ed. Cambridge MA: O’Reilly. <a href="https://csgillespie.github.io/efficientR/">https://csgillespie.github.io/efficientR/</a>.
</div>
<div id="ref-xie2015" class="csl-entry">
Xie, Yihui. 2015. <em>Dynamic Documents with <span>R</span> and Knitr</em>. 2nd ed. Boca Raton, Florida: Chapman &amp; Hall/CRC. <a href="http://yihui.name/knitr/">http://yihui.name/knitr/</a>.
</div>
</div>
<div class="footnotes">
<hr />
<ol start="2">
<li id="fn2"><p>Read more about knitr’s <a href="https://yihui.name/knitr/demo/externalization/">code externalization</a><a href="file-prototype-r.html#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p>The error message “Error in library(foo) : there is no package called ‘foo’” is easier to understand than “Error in bar() : could not find function ‘bar’” thrown somewhere in the middle of the file; this check can also illuminate conflicts arising when two packages have a <code>bar()</code> function. See McConnell 2004 Section qqq for more about the ‘fail early’ principle.<a href="file-prototype-r.html#fnref3" class="footnote-back">↩︎</a></p></li>
<li id="fn4"><p>Say a csv has 20 columns, but a row has missing values for the last five columns. Instead of five successive commas to indicate five empty cells exist, a jagged rectangle simply ends after the last nonmissing value. vroom infers the missing values correctly, while some other packages do not.<a href="file-prototype-r.html#fnref4" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="architecture.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="file-prototype-sql.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ouhscbbmc/data-science-practices-1/edit/master/ch-file-prototype-r.md",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["data-science-practices-1.pdf", "data-science-practices-1.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
