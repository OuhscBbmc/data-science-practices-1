<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Data at Rest | Collaborative Data Science Practices</title>
  <meta name="description" content="Collection of publicly available practices of data science and analysis." />
  <meta name="generator" content="bookdown 0.17 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Data at Rest | Collaborative Data Science Practices" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Collection of publicly available practices of data science and analysis." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Data at Rest | Collaborative Data Science Practices" />
  
  <meta name="twitter:description" content="Collection of publicly available practices of data science and analysis." />
  

<meta name="author" content="Will Beasley" />


<meta name="date" content="2020-01-26" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="architecture.html"/>
<link rel="next" href="scaling-up.html"/>
<script src="libs/header-attrs-2.1/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Collaborative Data Science</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.0.1" data-path="index.html"><a href="index.html#coding-simplify-types"><i class="fa fa-check"></i><b>1.0.1</b> Data Types</a></li>
<li class="chapter" data-level="1.0.2" data-path="index.html"><a href="index.html#coding-simplify-categorical"><i class="fa fa-check"></i><b>1.0.2</b> Categorical Levels</a></li>
<li class="chapter" data-level="1.0.3" data-path="index.html"><a href="index.html#coding-simplify-recoding"><i class="fa fa-check"></i><b>1.0.3</b> Recoding</a></li>
<li class="chapter" data-level="1.0.4" data-path="index.html"><a href="index.html#coding-defensive-qualify-functions"><i class="fa fa-check"></i><b>1.0.4</b> Qualify functions</a></li>
<li class="chapter" data-level="1.0.5" data-path="index.html"><a href="index.html#coding-defensive-date-arithmetic"><i class="fa fa-check"></i><b>1.0.5</b> Date Arithmetic</a></li>
<li class="chapter" data-level="1.0.6" data-path="index.html"><a href="index.html#excluding-bad-cases"><i class="fa fa-check"></i><b>1.0.6</b> Excluding Bad Cases</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="architecture.html"><a href="architecture.html"><i class="fa fa-check"></i><b>2</b> Architecture Principles</a>
<ul>
<li class="chapter" data-level="2.1" data-path="architecture.html"><a href="architecture.html#encapsulation"><i class="fa fa-check"></i><b>2.1</b> Encapsulation</a></li>
<li class="chapter" data-level="2.2" data-path="architecture.html"><a href="architecture.html#leverage-team-members-strenghts-avoid-weaknesses"><i class="fa fa-check"></i><b>2.2</b> Leverage team member’s strenghts &amp; avoid weaknesses</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="architecture.html"><a href="architecture.html#focused-code-files"><i class="fa fa-check"></i><b>2.2.1</b> Focused code files</a></li>
<li class="chapter" data-level="2.2.2" data-path="architecture.html"><a href="architecture.html#metadata-for-content-experts"><i class="fa fa-check"></i><b>2.2.2</b> Metadata for content experts</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="architecture.html"><a href="architecture.html#scales"><i class="fa fa-check"></i><b>2.3</b> Scales</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="architecture.html"><a href="architecture.html#single-source-single-analysis"><i class="fa fa-check"></i><b>2.3.1</b> Single source &amp; single analysis</a></li>
<li class="chapter" data-level="2.3.2" data-path="architecture.html"><a href="architecture.html#multiple-sources-multiple-analyses"><i class="fa fa-check"></i><b>2.3.2</b> Multiple sources &amp; multiple analyses</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="architecture.html"><a href="architecture.html#architecture-consistency"><i class="fa fa-check"></i><b>2.4</b> Consistency</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="architecture.html"><a href="architecture.html#consistency-files"><i class="fa fa-check"></i><b>2.4.1</b> Across Files</a></li>
<li class="chapter" data-level="2.4.2" data-path="architecture.html"><a href="architecture.html#across-languages"><i class="fa fa-check"></i><b>2.4.2</b> Across Languages</a></li>
<li class="chapter" data-level="2.4.3" data-path="architecture.html"><a href="architecture.html#across-projects"><i class="fa fa-check"></i><b>2.4.3</b> Across Projects</a></li>
<li class="chapter" data-level="2.4.4" data-path="architecture.html"><a href="architecture.html#repo-config"><i class="fa fa-check"></i><b>2.4.4</b> <code>config.R</code></a></li>
<li class="chapter" data-level="2.4.5" data-path="architecture.html"><a href="architecture.html#repo-flow"><i class="fa fa-check"></i><b>2.4.5</b> <code>flow.R</code></a></li>
<li class="chapter" data-level="2.4.6" data-path="architecture.html"><a href="architecture.html#repo-readme"><i class="fa fa-check"></i><b>2.4.6</b> <code>README.md</code></a></li>
<li class="chapter" data-level="2.4.7" data-path="architecture.html"><a href="architecture.html#repo-rproj"><i class="fa fa-check"></i><b>2.4.7</b> <code>*.Rproj</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-rest.html"><a href="data-rest.html"><i class="fa fa-check"></i><b>3</b> Data at Rest</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-rest.html"><a href="data-rest.html#data-states"><i class="fa fa-check"></i><b>3.1</b> Data States</a></li>
<li class="chapter" data-level="3.2" data-path="data-rest.html"><a href="data-rest.html#data-containers"><i class="fa fa-check"></i><b>3.2</b> Data Containers</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="data-rest.html"><a href="data-rest.html#data-rest-csv"><i class="fa fa-check"></i><b>3.2.1</b> csv</a></li>
<li class="chapter" data-level="3.2.2" data-path="data-rest.html"><a href="data-rest.html#data-rest-rds"><i class="fa fa-check"></i><b>3.2.2</b> rds</a></li>
<li class="chapter" data-level="3.2.3" data-path="data-rest.html"><a href="data-rest.html#data-rest-sqlite"><i class="fa fa-check"></i><b>3.2.3</b> SQLite</a></li>
<li class="chapter" data-level="3.2.4" data-path="data-rest.html"><a href="data-rest.html#data-rest-database"><i class="fa fa-check"></i><b>3.2.4</b> Central Enterprise database</a></li>
<li class="chapter" data-level="3.2.5" data-path="data-rest.html"><a href="data-rest.html#data-rest-redcap"><i class="fa fa-check"></i><b>3.2.5</b> Central REDCap database</a></li>
<li class="chapter" data-level="3.2.6" data-path="data-rest.html"><a href="data-rest.html#data-rest-avoid"><i class="fa fa-check"></i><b>3.2.6</b> Containers to avoid for raw/input</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data-rest.html"><a href="data-rest.html#data-rest-conventions"><i class="fa fa-check"></i><b>3.3</b> Storage Conventions</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="data-rest.html"><a href="data-rest.html#data-rest-conventions-all"><i class="fa fa-check"></i><b>3.3.1</b> All Sources</a></li>
<li class="chapter" data-level="3.3.2" data-path="data-rest.html"><a href="data-rest.html#data-rest-conventions-text"><i class="fa fa-check"></i><b>3.3.2</b> Text</a></li>
<li class="chapter" data-level="3.3.3" data-path="data-rest.html"><a href="data-rest.html#data-rest-conventions-excel"><i class="fa fa-check"></i><b>3.3.3</b> Excel</a></li>
<li class="chapter" data-level="3.3.4" data-path="data-rest.html"><a href="data-rest.html#data-rest-conventions-json"><i class="fa fa-check"></i><b>3.3.4</b> JSON and XML</a></li>
<li class="chapter" data-level="3.3.5" data-path="data-rest.html"><a href="data-rest.html#data-rest-conventions-arrow"><i class="fa fa-check"></i><b>3.3.5</b> Arrow</a></li>
<li class="chapter" data-level="3.3.6" data-path="data-rest.html"><a href="data-rest.html#data-rest-conventions-meditech"><i class="fa fa-check"></i><b>3.3.6</b> Meditech</a></li>
<li class="chapter" data-level="3.3.7" data-path="data-rest.html"><a href="data-rest.html#data-rest-conventions-database"><i class="fa fa-check"></i><b>3.3.7</b> Databases</a></li>
<li class="chapter" data-level="3.3.8" data-path="data-rest.html"><a href="data-rest.html#purpose"><i class="fa fa-check"></i><b>3.3.8</b> Purpose</a></li>
<li class="chapter" data-level="3.3.9" data-path="data-rest.html"><a href="data-rest.html#philosophy"><i class="fa fa-check"></i><b>3.3.9</b> Philosophy</a></li>
<li class="chapter" data-level="3.3.10" data-path="data-rest.html"><a href="data-rest.html#guidelines"><i class="fa fa-check"></i><b>3.3.10</b> Guidelines</a></li>
<li class="chapter" data-level="3.3.11" data-path="data-rest.html"><a href="data-rest.html#examples"><i class="fa fa-check"></i><b>3.3.11</b> Examples</a></li>
<li class="chapter" data-level="3.3.12" data-path="data-rest.html"><a href="data-rest.html#elements"><i class="fa fa-check"></i><b>3.3.12</b> Elements</a></li>
<li class="chapter" data-level="3.3.13" data-path="data-rest.html"><a href="data-rest.html#primary-rules-for-mapping"><i class="fa fa-check"></i><b>3.3.13</b> Primary Rules for Mapping</a></li>
<li class="chapter" data-level="3.3.14" data-path="data-rest.html"><a href="data-rest.html#secondary-rules-for-mapping"><i class="fa fa-check"></i><b>3.3.14</b> Secondary Rules for Mapping</a></li>
<li class="chapter" data-level="3.3.15" data-path="data-rest.html"><a href="data-rest.html#scrubbing-github-history"><i class="fa fa-check"></i><b>3.3.15</b> Scrubbing GitHub history</a></li>
<li class="chapter" data-level="3.3.16" data-path="data-rest.html"><a href="data-rest.html#automation-flow"><i class="fa fa-check"></i><b>3.3.16</b> Flow File in R</a></li>
<li class="chapter" data-level="3.3.17" data-path="data-rest.html"><a href="data-rest.html#automation-makefile"><i class="fa fa-check"></i><b>3.3.17</b> Makefile</a></li>
<li class="chapter" data-level="3.3.18" data-path="data-rest.html"><a href="data-rest.html#automation-ssis"><i class="fa fa-check"></i><b>3.3.18</b> SSIS</a></li>
<li class="chapter" data-level="3.3.19" data-path="data-rest.html"><a href="data-rest.html#automation-cron"><i class="fa fa-check"></i><b>3.3.19</b> cron</a></li>
<li class="chapter" data-level="3.3.20" data-path="data-rest.html"><a href="data-rest.html#automation-task-scheduler"><i class="fa fa-check"></i><b>3.3.20</b> Task Scheduler</a></li>
<li class="chapter" data-level="3.3.21" data-path="data-rest.html"><a href="data-rest.html#automation-sql-server-agent"><i class="fa fa-check"></i><b>3.3.21</b> SQL Server Agent</a></li>
<li class="chapter" data-level="3.3.22" data-path="data-rest.html"><a href="data-rest.html#sink-log-files"><i class="fa fa-check"></i><b>3.3.22</b> Sink Log Files</a></li>
<li class="chapter" data-level="3.3.23" data-path="data-rest.html"><a href="data-rest.html#package-versions"><i class="fa fa-check"></i><b>3.3.23</b> Package Versions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="scaling-up.html"><a href="scaling-up.html"><i class="fa fa-check"></i><b>4</b> Scaling Up</a>
<ul>
<li class="chapter" data-level="4.1" data-path="scaling-up.html"><a href="scaling-up.html#data-storage"><i class="fa fa-check"></i><b>4.1</b> Data Storage</a></li>
<li class="chapter" data-level="4.2" data-path="scaling-up.html"><a href="scaling-up.html#data-processing"><i class="fa fa-check"></i><b>4.2</b> Data Processing</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="scaling-up.html"><a href="scaling-up.html#github"><i class="fa fa-check"></i><b>4.2.1</b> GitHub</a></li>
<li class="chapter" data-level="4.2.2" data-path="scaling-up.html"><a href="scaling-up.html#common-code"><i class="fa fa-check"></i><b>4.2.2</b> Common Code</a></li>
<li class="chapter" data-level="4.2.3" data-path="scaling-up.html"><a href="scaling-up.html#documentation-issue-template"><i class="fa fa-check"></i><b>4.2.3</b> GitHub Issue Template</a></li>
<li class="chapter" data-level="4.2.4" data-path="scaling-up.html"><a href="scaling-up.html#style-number"><i class="fa fa-check"></i><b>4.2.4</b> Number</a></li>
<li class="chapter" data-level="4.2.5" data-path="scaling-up.html"><a href="scaling-up.html#style-abbreviation"><i class="fa fa-check"></i><b>4.2.5</b> Abbreviations</a></li>
<li class="chapter" data-level="4.2.6" data-path="scaling-up.html"><a href="scaling-up.html#style-filter"><i class="fa fa-check"></i><b>4.2.6</b> Filtering Rows</a></li>
<li class="chapter" data-level="4.2.7" data-path="scaling-up.html"><a href="scaling-up.html#style-attach"><i class="fa fa-check"></i><b>4.2.7</b> Don’t attach</a></li>
<li class="chapter" data-level="4.2.8" data-path="scaling-up.html"><a href="scaling-up.html#style-factor-unknown"><i class="fa fa-check"></i><b>4.2.8</b> Explicit Missing Values</a></li>
<li class="chapter" data-level="4.2.9" data-path="scaling-up.html"><a href="scaling-up.html#style-factor-granularity"><i class="fa fa-check"></i><b>4.2.9</b> Granularity</a></li>
<li class="chapter" data-level="4.2.10" data-path="scaling-up.html"><a href="scaling-up.html#style-naming-datasets"><i class="fa fa-check"></i><b>4.2.10</b> Datasets</a></li>
<li class="chapter" data-level="4.2.11" data-path="scaling-up.html"><a href="scaling-up.html#style-naming-semantic"><i class="fa fa-check"></i><b>4.2.11</b> Semantic sorting</a></li>
<li class="chapter" data-level="4.2.12" data-path="scaling-up.html"><a href="scaling-up.html#style-ggplot-order"><i class="fa fa-check"></i><b>4.2.12</b> Order of commands</a></li>
<li class="chapter" data-level="4.2.13" data-path="scaling-up.html"><a href="scaling-up.html#style-ggplot-gotchas"><i class="fa fa-check"></i><b>4.2.13</b> Gotchas</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="publication.html"><a href="publication.html"><i class="fa fa-check"></i><b>5</b> Publishing Results</a>
<ul>
<li class="chapter" data-level="5.1" data-path="publication.html"><a href="publication.html#to-other-analysts"><i class="fa fa-check"></i><b>5.1</b> To Other Analysts</a></li>
<li class="chapter" data-level="5.2" data-path="publication.html"><a href="publication.html#to-researchers-content-experts"><i class="fa fa-check"></i><b>5.2</b> To Researchers &amp; Content Experts</a></li>
<li class="chapter" data-level="5.3" data-path="publication.html"><a href="publication.html#to-technical-phobic-audiences"><i class="fa fa-check"></i><b>5.3</b> To Technical-Phobic Audiences</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="testing-and-validation.html"><a href="testing-and-validation.html"><i class="fa fa-check"></i><b>6</b> Testing, Validation, &amp; Defensive Programming</a>
<ul>
<li class="chapter" data-level="6.1" data-path="testing-and-validation.html"><a href="testing-and-validation.html#testing-functions"><i class="fa fa-check"></i><b>6.1</b> Testing Functions</a></li>
<li class="chapter" data-level="6.2" data-path="testing-and-validation.html"><a href="testing-and-validation.html#defensive-programming"><i class="fa fa-check"></i><b>6.2</b> Defensive Programming</a></li>
<li class="chapter" data-level="6.3" data-path="testing-and-validation.html"><a href="testing-and-validation.html#validator"><i class="fa fa-check"></i><b>6.3</b> Validator</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="troubleshooting.html"><a href="troubleshooting.html"><i class="fa fa-check"></i><b>7</b> Troubleshooting and Debugging</a>
<ul>
<li class="chapter" data-level="7.1" data-path="troubleshooting.html"><a href="troubleshooting.html#finding-help"><i class="fa fa-check"></i><b>7.1</b> Finding Help</a></li>
<li class="chapter" data-level="7.2" data-path="troubleshooting.html"><a href="troubleshooting.html#debugging"><i class="fa fa-check"></i><b>7.2</b> Debugging</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="troubleshooting.html"><a href="troubleshooting.html#r"><i class="fa fa-check"></i><b>7.2.1</b> R</a></li>
<li class="chapter" data-level="7.2.2" data-path="troubleshooting.html"><a href="troubleshooting.html#rstudio"><i class="fa fa-check"></i><b>7.2.2</b> RStudio</a></li>
<li class="chapter" data-level="7.2.3" data-path="troubleshooting.html"><a href="troubleshooting.html#installing-r-packages"><i class="fa fa-check"></i><b>7.2.3</b> Installing R Packages</a></li>
<li class="chapter" data-level="7.2.4" data-path="troubleshooting.html"><a href="troubleshooting.html#updating-r-packages"><i class="fa fa-check"></i><b>7.2.4</b> Updating R Packages</a></li>
<li class="chapter" data-level="7.2.5" data-path="troubleshooting.html"><a href="troubleshooting.html#github-1"><i class="fa fa-check"></i><b>7.2.5</b> GitHub</a></li>
<li class="chapter" data-level="7.2.6" data-path="troubleshooting.html"><a href="troubleshooting.html#github-for-windows-client"><i class="fa fa-check"></i><b>7.2.6</b> GitHub for Windows Client</a></li>
<li class="chapter" data-level="7.2.7" data-path="troubleshooting.html"><a href="troubleshooting.html#the-components-goal"><i class="fa fa-check"></i><b>7.2.7</b> The Component’s Goal</a></li>
<li class="chapter" data-level="7.2.8" data-path="troubleshooting.html"><a href="troubleshooting.html#current-skillset-of-team"><i class="fa fa-check"></i><b>7.2.8</b> Current Skillset of Team</a></li>
<li class="chapter" data-level="7.2.9" data-path="troubleshooting.html"><a href="troubleshooting.html#desired-future-skillset-of-team"><i class="fa fa-check"></i><b>7.2.9</b> Desired Future Skillset of Team</a></li>
<li class="chapter" data-level="7.2.10" data-path="troubleshooting.html"><a href="troubleshooting.html#skillset-of-audience"><i class="fa fa-check"></i><b>7.2.10</b> Skillset of Audience</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="team.html"><a href="team.html"><i class="fa fa-check"></i><b>8</b> Growing a Team</a>
<ul>
<li class="chapter" data-level="8.1" data-path="team.html"><a href="team.html#recruiting"><i class="fa fa-check"></i><b>8.1</b> Recruiting</a></li>
<li class="chapter" data-level="8.2" data-path="team.html"><a href="team.html#training-to-data-science"><i class="fa fa-check"></i><b>8.2</b> Training to Data Science</a></li>
<li class="chapter" data-level="8.3" data-path="team.html"><a href="team.html#bridges-outside-the-team"><i class="fa fa-check"></i><b>8.3</b> Bridges Outside the Team</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="team.html"><a href="team.html#reading-from-excel"><i class="fa fa-check"></i><b>8.3.1</b> Reading from Excel</a></li>
<li class="chapter" data-level="8.3.2" data-path="team.html"><a href="team.html#removing-trailing-comma-from-header"><i class="fa fa-check"></i><b>8.3.2</b> Removing Trailing Comma from Header</a></li>
<li class="chapter" data-level="8.3.3" data-path="team.html"><a href="team.html#correct-for-misinterpreted-two-digit-year"><i class="fa fa-check"></i><b>8.3.3</b> Correct for misinterpreted two-digit year</a></li>
<li class="chapter" data-level="8.3.4" data-path="team.html"><a href="team.html#snippet-tag"><i class="fa fa-check"></i><b>8.3.4</b> Generating “tags”</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="example-bookdown.html"><a href="example-bookdown.html"><i class="fa fa-check"></i><b>9</b> Example</a></li>
<li class="chapter" data-level="10" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>10</b> References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Collaborative Data Science Practices</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-rest" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> Data at Rest</h1>
<div id="data-states" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Data States</h2>
<ol style="list-style-type: decimal">
<li>Raw</li>
<li>Derived
<ol style="list-style-type: decimal">
<li>Project-wide File on Repo</li>
<li>Project-wide File on Protected File Server</li>
<li>User-specific File on Protected File Server</li>
<li>Project-wide Database</li>
</ol></li>
<li>Original</li>
</ol>
</div>
<div id="data-containers" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Data Containers</h2>
<div id="data-rest-csv" class="section level3" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> csv</h3>
<p>When exchanging data between two different systems, the preferred format is frequently plain text. As opposed to proprietary formats like xlsx or sas7bdat, the file is easily opened and parsable by most statistical software, and even conventional text editors.</p>
<p>Incoming files should be plain-text <a href="https://en.wikipedia.org/wiki/Comma-separated_values">csv</a> –not Excel or other proprietary or binary format.</p>
</div>
<div id="data-rest-rds" class="section level3" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> rds</h3>
</div>
<div id="data-rest-sqlite" class="section level3" number="3.2.3">
<h3><span class="header-section-number">3.2.3</span> SQLite</h3>
</div>
<div id="data-rest-database" class="section level3" number="3.2.4">
<h3><span class="header-section-number">3.2.4</span> Central Enterprise database</h3>
</div>
<div id="data-rest-redcap" class="section level3" number="3.2.5">
<h3><span class="header-section-number">3.2.5</span> Central REDCap database</h3>
</div>
<div id="data-rest-avoid" class="section level3" number="3.2.6">
<h3><span class="header-section-number">3.2.6</span> Containers to avoid for raw/input</h3>
<ol style="list-style-type: decimal">
<li>Proprietary like xlsx, sas7bdat</li>
</ol>
</div>
</div>
<div id="data-rest-conventions" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Storage Conventions</h2>
<div id="data-rest-conventions-all" class="section level3" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span> All Sources</h3>
<p>Across all file formats, these conventions usually work best.</p>
<ol style="list-style-type: decimal">
<li><p><strong>consistency across versions</strong>: use a script to produce the dataset, and inform the recipient if the datasets’s structure changes. Most of our processes are automated, and changes that are trivial to humans (<em>e.g.</em>, <code>yyyy-mm-dd</code> to <code>mm/dd-yy</code>) will break the automation.</p>
<p>The specificity in our automation is intentional. We install guards on our processes so that bad values do not pass. For instance, we may place bounds on the toddlers’ age at 12 and 36 months. We <em>want</em> our automation to break if the next dataset contains age values between 1 and 3 (years). Our downstream analysis (say, a regression model where age is a predictor variable) would produce misleading results if the shift between months and years went undetected.</p></li>
<li><p><strong>date format</strong>: specify as <code>YYYY-MM-DD</code> (<a href="https://www.explainxkcd.com/wiki/index.php/1179:_ISO_8601">ISO-8601</a>)</p></li>
<li><p><strong>time format</strong>: specify as <code>HH:MM</code> or <code>HH:MM:SS</code>, preferably in 24-hour time. Use a leading zero from midnight to 9:59am, with a colon separating hours, minutes, and seconds (<em>i.e.</em>, <strong>0</strong>9:59)</p></li>
<li><p><strong>patient names</strong>: separate the <code>name_last</code>, <code>name_first</code>, and <code>name_middle</code> as three distinct variables when possible.</p></li>
<li><p><strong>currency</strong>: represent money as an integer or floating-point variable. This representation is more easily parsable by software, and enables mathematical operations (like <code>max()</code> or <code>mean()</code>) to be performed directly. Avoid commas and symbols like “$”. If there is a possibility of ambiguity, indicate the denomination in the variable name (<em>e.g.</em>, <code>payment_dollars</code> or <code>payment_euros</code>).</p></li>
</ol>
</div>
<div id="data-rest-conventions-text" class="section level3" number="3.3.2">
<h3><span class="header-section-number">3.3.2</span> Text</h3>
<p>These conventions usually work best within plain-text formats.</p>
<ol style="list-style-type: decimal">
<li><p><strong>csv</strong>: comma separated values are the most common plain-text format, so they have better support than similar formats where cells are separated by tabs or semi-colons. However, if you are receiving a well-behaved file separated by these characters, be thankful and go with the flow.</p></li>
<li><p><strong>cells enclosed in quotes</strong>: a ‘cell’ should be enclosed in double quotes, especially if it’s a string/character variable.</p></li>
</ol>
</div>
<div id="data-rest-conventions-excel" class="section level3" number="3.3.3">
<h3><span class="header-section-number">3.3.3</span> Excel</h3>
<p>Although it may feel that you are fighting a losing battle, try not to receive data in Excel files. I think Excel can be useful for light brainstorming and protyping equations –but is should not be used to contain serious data. When avoiding Excel is not possible:</p>
<ol style="list-style-type: decimal">
<li><p><strong>avoid multiple tabs/worksheets</strong>: Excel files containing multiple worksheets are more complicated to read with automation, and the produces the opportunities for inconsistent variables across tabs/worksheets.</p></li>
<li><p><strong>save the cells as text</strong>: avoiding Excel attempting to save cells as dates or numbers. Admitedly, this is a last-ditch effort. If someone is using Excel to convert cells to text, the values are probably already corrupted.</p></li>
</ol>
<p>We receive extracts as Excel files frequently, and have the following request ready to email the person sending us Excel files. Adapt the bold values like “109.19” to your situation. If you are familiar with their tools, suggest an alternative for saving the file as a csv. Once presented with these Excel gotchas, almost everyone has an ‘aha’ moment and recognizes the problem. Unfortunately, not everyone has the capability to adapt easily.</p>
<hr />
<p>Sorry to be tedious, but could you please resend the extract as a <a href="https://en.wikipedia.org/wiki/Comma-separated_values">csv</a> file? Please call me if you have questions.</p>
<p>Excel is being too helpful with some of the values, and essentially corrupting them. For example, values like <strong>109.19</strong> is interpreted as a number, not a character code (<em>e.g.</em>, see cell <strong>L14</strong>). Because of <a href="https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html">limitations of finite precision</a>, this becomes <strong>109.18999999999999773</strong>. We can’t round it, because there are other values in this column that cannot be cast to numbers, such as <strong>V55.0</strong>. Furthermore, the “E”s in some codes are incorrectly interpreted as the exponent operator (<em>e.g.</em>, “4E5” is converted to 400,000). Finally, values like <strong>41.0</strong> are being converted to a number and the trailing zero is dropped (so cells like “41” are not distinguishable from “41.0”).</p>
<p>Unfortunately the problems exist in the Excel file itself. When we import the columns <a href="https://readxl.tidyverse.org/reference/read_excel.html">as text</a>, the values are already in their corrupted state.</p>
<p>Please compress/zip the csv file if it might be too big to fit into an email. We’ve found that an Excel file is 5-10 times larger than a compressed csv.</p>
<p>As much as Excel interferes with our medical variables, we’re lucky. It has messed with other branches of science much worse. Genomics were using it far too late <a href="https://qz.com/768334/years-of-genomics-research-is-riddled-with-errors-thanks-to-a-bunch-of-botched-excel-spreadsheets/">before they realized their mistakes</a>. I’m guessing some still use it.</p>
<blockquote>
<p>What happened? By default, Excel and other popular spreadsheet applications convert some gene symbols to dates and numbers. For example, instead of writing out “Membrane-Associated Ring Finger (C3HC4) 1, E3 Ubiquitin Protein Ligase,” researchers have dubbed the gene MARCH1. Excel converts this into a date—03/01/2016, say—because that’s probably what the majority of spreadsheet users mean when they type it into a cell. Similarly, gene identifiers like “2310009E13” are converted to exponential numbers (2.31E+19). In both cases, the conversions strip out valuable information about the genes in question.</p>
</blockquote>
<hr />
</div>
<div id="data-rest-conventions-json" class="section level3" number="3.3.4">
<h3><span class="header-section-number">3.3.4</span> JSON and XML</h3>
<p>The plain-text format is typically preferred when the data structures cannot be represented by nice rectangles. qqq</p>
</div>
<div id="data-rest-conventions-arrow" class="section level3" number="3.3.5">
<h3><span class="header-section-number">3.3.5</span> Arrow</h3>
<p><a href="https://arrow.apache.org/">Apache Arrow</a> is an open source specification that is developed to work with many languages such as <a href="https://arrow.apache.org/docs/r/">R</a>, <a href="https://towardsdatascience.com/a-gentle-introduction-to-apache-arrow-with-apache-spark-and-pandas-bb19ffe0ddae">Spark</a>, <a href="https://spark.apache.org/docs/latest/sql-pyspark-pandas-with-arrow.html">Python</a>, and many others. It accommodates nice rectangles where CSVs are used, and hierarchical nesting where json and xml are used.</p>
<p>It is both an in-memory specification (which allows a Python process to directly access an R object), and an on-disk pspecification (which allows a Python process to read a saved R file). The file format is compressed, so it takes much less space to store on disk and less time to transfer over a network.</p>
<p>Its downside is the file is not plain-text, but binary. That means the file is not readable and editable by as many programs, which hurts your project’s portability. You wouldn’t want to store most metadata files as arrow because then your collaborators couldn’t easily help you map the values to qqq</p>
</div>
<div id="data-rest-conventions-meditech" class="section level3" number="3.3.6">
<h3><span class="header-section-number">3.3.6</span> Meditech</h3>
<ol style="list-style-type: decimal">
<li><p><strong>patient identifier</strong>: <code>mrn_meditech</code> instead of <code>mrn</code>, <code>MRN Rec#</code>, or <code>Med Rec#</code>.</p></li>
<li><p><strong>account/admission identifier</strong>: <code>account_number</code> instead of <code>mrn</code>, <code>Acct#</code>, or <code>Account#</code>.</p></li>
<li><p><strong>patient’s full name</strong>: <code>name_full</code> instead of <code>Patient Name</code> or <code>Name</code>.</p></li>
<li><p><strong>long/tall format</strong>: one row per dx per patient (up to 50 dxs) instead of 50 <em>columns</em> of <code>dx</code> per patient. Applies to</p>
<ol style="list-style-type: decimal">
<li><p>diagnosis code &amp; description</p></li>
<li><p>order date &amp; number</p></li>
<li><p>procedure name &amp; number</p></li>
</ol></li>
</ol>
<p>Meditech Idiosyncracies:</p>
<ol style="list-style-type: decimal">
<li><strong>blood pressure</strong>: in most systems the <code>bp_diastolic</code> and <code>bp_systolic</code> values are stored in separate integer variables. In Meditech, they are stored in a single character variable, separated by a foward slash.</li>
</ol>
</div>
<div id="data-rest-conventions-database" class="section level3" number="3.3.7">
<h3><span class="header-section-number">3.3.7</span> Databases</h3>
<p>When exchanging data between two different systems, …</p>

</div>
<div id="purpose" class="section level3" number="3.3.8">
<h3><span class="header-section-number">3.3.8</span> Purpose</h3>
</div>
<div id="philosophy" class="section level3" number="3.3.9">
<h3><span class="header-section-number">3.3.9</span> Philosophy</h3>
</div>
<div id="guidelines" class="section level3" number="3.3.10">
<h3><span class="header-section-number">3.3.10</span> Guidelines</h3>
</div>
<div id="examples" class="section level3" number="3.3.11">
<h3><span class="header-section-number">3.3.11</span> Examples</h3>
</div>
<div id="elements" class="section level3" number="3.3.12">
<h3><span class="header-section-number">3.3.12</span> Elements</h3>
</div>
<div id="primary-rules-for-mapping" class="section level3" number="3.3.13">
<h3><span class="header-section-number">3.3.13</span> Primary Rules for Mapping</h3>
</div>
<div id="secondary-rules-for-mapping" class="section level3" number="3.3.14">
<h3><span class="header-section-number">3.3.14</span> Secondary Rules for Mapping</h3>

</div>
<div id="scrubbing-github-history" class="section level3" number="3.3.15">
<h3><span class="header-section-number">3.3.15</span> Scrubbing GitHub history</h3>
<div id="resources" class="section level5" number="3.3.15.0.1">
<h5><span class="header-section-number">3.3.15.0.1</span> Resources</h5>

</div>
</div>
<div id="automation-flow" class="section level3" number="3.3.16">
<h3><span class="header-section-number">3.3.16</span> Flow File in R</h3>
</div>
<div id="automation-makefile" class="section level3" number="3.3.17">
<h3><span class="header-section-number">3.3.17</span> Makefile</h3>
</div>
<div id="automation-ssis" class="section level3" number="3.3.18">
<h3><span class="header-section-number">3.3.18</span> SSIS</h3>
</div>
<div id="automation-cron" class="section level3" number="3.3.19">
<h3><span class="header-section-number">3.3.19</span> cron</h3>
</div>
<div id="automation-task-scheduler" class="section level3" number="3.3.20">
<h3><span class="header-section-number">3.3.20</span> Task Scheduler</h3>
</div>
<div id="automation-sql-server-agent" class="section level3" number="3.3.21">
<h3><span class="header-section-number">3.3.21</span> SQL Server Agent</h3>
</div>
<div id="sink-log-files" class="section level3" number="3.3.22">
<h3><span class="header-section-number">3.3.22</span> Sink Log Files</h3>
</div>
<div id="package-versions" class="section level3" number="3.3.23">
<h3><span class="header-section-number">3.3.23</span> Package Versions</h3>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="architecture.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="scaling-up.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ouhscbbmc/data-science-practices-1/edit/master/ch-data-persisted.md",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["data-science-practices-1.pdf", "data-science-practices-1.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
